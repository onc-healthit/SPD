-- MySQL Script generated by MySQL Workbench
-- Tue Apr  9 17:44:36 2019
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

- -----------------------------------------------------
-- Schema spd_medium
-- -----------------------------------------------------
DROP SCHEMA IF EXISTS `spd_medium` ;

-- -----------------------------------------------------
-- Schema spd_medium
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `spd_medium` DEFAULT CHARACTER SET utf8 ;
USE `spd_medium` ;

-- -----------------------------------------------------
-- Table `spd_medium`.`actor`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `spd_medium`.`actor` ;

CREATE TABLE IF NOT EXISTS `spd_medium`.`actor` (
  `actor_id` INT(11) NOT NULL AUTO_INCREMENT,
  `role_cc_id` INT(11) NOT NULL COMMENT 'How the actor is involved\nBinding: SecurityRoleType (extensible)\nFixed Value: {\"system\":\"http://terminology.hl7.org/CodeSystem/v3-ParticipationType\",\"code\":\"IRCP\"} (information recipient)',
  `reference_resource_id` INT(11) NOT NULL COMMENT 'The resource that identifies the actor. To identify actors by type, use group to identify a set of actors by some property they share (e.g. \'admitting officers\').\n\nReference(VhDir Organization | VhDir Care Team | VhDir Practitioner)',
  `provision_id` INT(11) NOT NULL COMMENT 'Who|what controlled by this rule (or group, by role)',
  PRIMARY KEY (`actor_id`),
  INDEX `fk_actor_fhir_codeable_concept1_idx` (`role_cc_id` ASC)  ,
  INDEX `fk_actor_provision1_idx` (`provision_id` ASC)  ,
  INDEX `fk_actor_resource_reference1_idx` (`reference_resource_id` ASC)  ,
  CONSTRAINT `fk_actor_fhir_codeable_concept1`
    FOREIGN KEY (`role_cc_id`)
    REFERENCES `spd_medium`.`fhir_codeable_concept` (`codeable_concept_id`),
  CONSTRAINT `fk_actor_provision1`
    FOREIGN KEY (`provision_id`)
    REFERENCES `spd_medium`.`provision` (`provision_id`),
  CONSTRAINT `fk_actor_resource_reference1`
    FOREIGN KEY (`reference_resource_id`)
    REFERENCES `spd_medium`.`resource_reference` (`resource_reference_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Who|what controlled by this rule (or group, by role)\n\nReference can be one of practitioner, organization, or caretema, but only one.\n\nMeaning if Missing\nThere is no specific actor associated with the exception';


-- -----------------------------------------------------
-- Table `spd_medium`.`address`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `spd_medium`.`address` ;

CREATE TABLE IF NOT EXISTS `spd_medium`.`address` (
  `address_id` INT(11) NOT NULL AUTO_INCREMENT,
  `use` VARCHAR(10) NULL DEFAULT NULL,
  `type` VARCHAR(10) NULL DEFAULT NULL,
  `text` VARCHAR(150) NULL DEFAULT NULL,
  `line1` VARCHAR(45) NULL DEFAULT NULL,
  `line2` VARCHAR(45) NULL DEFAULT NULL,
  `city` VARCHAR(45) NULL DEFAULT NULL,
  `district` VARCHAR(45) NULL DEFAULT NULL,
  `state` VARCHAR(5) NULL DEFAULT NULL,
  `postalCode` VARCHAR(10) NULL DEFAULT NULL,
  `country` VARCHAR(3) NULL DEFAULT NULL,
  `latitude` DECIMAL(10,0) NULL DEFAULT '0',
  `longitude` DECIMAL(10,0) NULL DEFAULT '0',
  `period_start` DATETIME NULL DEFAULT NULL,
  `period_end` DATETIME NULL DEFAULT NULL,
  `practitioner_id` INT(11) NULL DEFAULT NULL COMMENT 'Address(es) of the practitioner that are not role specific (typically home address)',
  `organization_id` INT(11) NULL DEFAULT NULL,
  `network_id` INT(11) NULL DEFAULT NULL,
  PRIMARY KEY (`address_id`),
  INDEX `address_practitioner_id_idx` (`practitioner_id` ASC)  ,
  INDEX `fk_address_organization1_idx` (`organization_id` ASC)  ,
  INDEX `fk_address_network1_idx` (`network_id` ASC)  ,
  CONSTRAINT `address_practitioner_id`
    FOREIGN KEY (`practitioner_id`)
    REFERENCES `spd_medium`.`vhdir_practitioner` (`practitioner_id`)
    ON DELETE CASCADE,
  CONSTRAINT `fk_address_network1`
    FOREIGN KEY (`network_id`)
    REFERENCES `spd_medium`.`vhdir_network` (`network_id`),
  CONSTRAINT `fk_address_organization1`
    FOREIGN KEY (`organization_id`)
    REFERENCES `spd_medium`.`vhdir_organization` (`organization_id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = latin1
COMMENT = 'All fields optional.\n\nReferenced by practitioner, organization, network';


-- -----------------------------------------------------
-- Table `spd_medium`.`attestation`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `spd_medium`.`attestation` ;

CREATE TABLE IF NOT EXISTS `spd_medium`.`attestation` (
  `attestation_id` INT(11) NOT NULL AUTO_INCREMENT,
  `who_resource_reference_id` INT(11) NOT NULL COMMENT 'The individual or organization attesting to information.\n\nReference(VhDir Practitioner | VhDir Organization | VhDir Practitioner Role)\n',
  `on_behalf_of_resource_reference_id` INT(11) NULL COMMENT 'When the who is asserting on behalf of another (organization or individual).\n\nReference(VhdirPractitioner | VhdirOrganization | VhdirPractitionerRole)',
  `communication_method_cc_id` INT(11) NOT NULL COMMENT 'The method by which attested information was submitted/retrieved (manual; API; Push).\n\nFor example codes, see verificationresult-communication-method',
  `date` DATE NOT NULL COMMENT 'The date the information was attested to.',
  `source_identity_certificate` VARCHAR(45) NULL DEFAULT NULL COMMENT 'A digital identity certificate associated with the attestation source.',
  `proxy_identity_certificate` VARCHAR(45) NULL DEFAULT NULL COMMENT 'A digital identity certificate associated with the proxy entity submitting attested information on behalf of the attestation source.',
  `proxy_signature` VARCHAR(45) NULL DEFAULT NULL COMMENT 'Signed assertion by the proxy entity indicating that they have the right to submit attested information on behalf of the attestation source.\n\nSignature type',
  `source_signature` VARCHAR(45) NULL DEFAULT NULL COMMENT 'Signed assertion by the attestation source that they have attested to the information.\n\nSignature type',
  PRIMARY KEY (`attestation_id`),
  INDEX `fk_attestation_fhir_codeable_concept1_idx` (`communication_method_cc_id` ASC)  ,
  INDEX `fk_attestation_resource_reference1_idx` (`who_resource_reference_id` ASC)  ,
  INDEX `fk_attestation_resource_reference2_idx` (`on_behalf_of_resource_reference_id` ASC)  ,
  CONSTRAINT `fk_attestation_fhir_codeable_concept1`
    FOREIGN KEY (`communication_method_cc_id`)
    REFERENCES `spd_medium`.`fhir_codeable_concept` (`codeable_concept_id`),
  CONSTRAINT `fk_attestation_resource_reference1`
    FOREIGN KEY (`who_resource_reference_id`)
    REFERENCES `spd_medium`.`resource_reference` (`resource_reference_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_attestation_resource_reference2`
    FOREIGN KEY (`on_behalf_of_resource_reference_id`)
    REFERENCES `spd_medium`.`resource_reference` (`resource_reference_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'verificationResult.attestation provides information about who attested to the information being validated\nwho identifies the source of the attested information (a practitioner, practitionerRole, or organization), onBehalfOf identifies an entity the “who” is attesting on behalf of.\ncommunicationMethod indicates how attested information is submitted/retrieved\ndate indicates when the information was attested to\nsourceIdentityCertificate and proxyIdentityCertificate assert the identity of the individual attesting to information and any proxy providing attested information on their behalf.\nsourceSignature and proxySignature assert that information was attested to/provided by the entity with the right to do so. verificationResult.validator provides information about the entity performing the validation of the target\norganization identifies the validating organization, and identityCertificate asserts their identity\nattestationSignature asserts that the validator has validated the target\n\nFields \'who\' and \'onBehalfOf\' can reference a practitioner, organization, or practioner role, but only one.\n\nHas mandatory who resource reference, communicationMethod codeable concept, data\n\nHas optional onBehalfOf resource reference, sourceIdentityCertificate string, procyIdentityCertificate string, proxy signature, source signature.\n\nReferenced by validation';


-- -----------------------------------------------------
-- Table `spd_medium`.`available_time`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `spd_medium`.`available_time` ;

CREATE TABLE IF NOT EXISTS `spd_medium`.`available_time` (
  `available_time_id` INT(11) NOT NULL AUTO_INCREMENT,
  `days_of_week` VARCHAR(45) NULL DEFAULT NULL,
  `all_day` TINYINT(4) NULL DEFAULT NULL,
  `available_start_time` TIME NULL DEFAULT NULL,
  `available_end_time` TIME NULL DEFAULT NULL,
  `endpoint_contact_available_time_id` INT(11) NULL DEFAULT NULL,
  `practitioner_role_id` INT(11) NULL DEFAULT NULL COMMENT 'Times the Service Site is available',
  `healthcare_service_id` INT(11) NULL DEFAULT NULL COMMENT 'Times the Service Site is available',
  `location_hours_of_operation_id` INT(11) NULL DEFAULT NULL COMMENT 'What days/times during a week is this location usually open',
  PRIMARY KEY (`available_time_id`),
  INDEX `fk_available_time_practitioner_role1_idx` (`practitioner_role_id` ASC)  ,
  INDEX `fk_available_time_endpoint_contact1_idx` (`endpoint_contact_available_time_id` ASC)  ,
  INDEX `fk_available_time_healthcare_service1_idx` (`healthcare_service_id` ASC)  ,
  INDEX `fk_available_time_location1_idx` (`location_hours_of_operation_id` ASC)  ,
  CONSTRAINT `fk_available_time_endpoint_contact1`
    FOREIGN KEY (`endpoint_contact_available_time_id`)
    REFERENCES `spd_medium`.`endpoint_contact` (`endpoint_contact_id`),
  CONSTRAINT `fk_available_time_healthcare_service1`
    FOREIGN KEY (`healthcare_service_id`)
    REFERENCES `spd_medium`.`vhdir_healthcare_service` (`healthcare_service_id`),
  CONSTRAINT `fk_available_time_location1`
    FOREIGN KEY (`location_hours_of_operation_id`)
    REFERENCES `spd_medium`.`vhdir_location` (`location_id`),
  CONSTRAINT `fk_available_time_practitioner_role1`
    FOREIGN KEY (`practitioner_role_id`)
    REFERENCES `spd_medium`.`vhdir_practitioner_role` (`practitioner_role_id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Has 0 to many daysOfWeek codes\noptional allDay boolean, optional start and end times.\n\nRefernced by practitioner, healtcare service, endpoint, location';


-- -----------------------------------------------------
-- Table `spd_medium`.`care_team_alias`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `spd_medium`.`care_team_alias` ;

CREATE TABLE IF NOT EXISTS `spd_medium`.`care_team_alias` (
  `care_team_alias_id` INT(11) NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NULL DEFAULT NULL,
  `careteam_id` INT(11) NULL DEFAULT NULL COMMENT 'Alternate name for care team referenced by this id',
  PRIMARY KEY (`care_team_alias_id`),
  INDEX `fk_care_team_alias_careteam1_idx` (`careteam_id` ASC)  ,
  CONSTRAINT `fk_care_team_alias_careteam1`
    FOREIGN KEY (`careteam_id`)
    REFERENCES `spd_medium`.`vhdir_careteam` (`careteam_id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Alternate name for care team\nURL: http://hl7.org/fhir/uv/vhdir/StructureDefinition/careteam-alias';


-- -----------------------------------------------------
-- Table `spd_medium`.`communication`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `spd_medium`.`communication` ;

CREATE TABLE IF NOT EXISTS `spd_medium`.`communication` (
  `communication_id` INT(11) NOT NULL AUTO_INCREMENT,
  `text` VARCHAR(45) NULL DEFAULT NULL COMMENT 'Plain text representation of the concept',
  PRIMARY KEY (`communication_id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'A language the referring entity can use in patient communication\nBinding: CommonLanguages (preferred)';


-- -----------------------------------------------------
-- Table `spd_medium`.`communication_proficiency`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `spd_medium`.`communication_proficiency` ;

CREATE TABLE IF NOT EXISTS `spd_medium`.`communication_proficiency` (
  `communication_proficiency_id` INT(11) NOT NULL,
  `coding_url` VARCHAR(45) NOT NULL,
  `value` VARCHAR(45) NULL DEFAULT NULL,
  `coding_system` VARCHAR(45) NULL DEFAULT NULL,
  `coding_version` VARCHAR(45) NULL DEFAULT NULL,
  `coding_code` VARCHAR(45) NULL DEFAULT NULL,
  `coding_display` VARCHAR(45) NULL DEFAULT NULL,
  `coding_user_selected` VARCHAR(45) NULL DEFAULT NULL,
  `communication_proficiencycol` VARCHAR(45) NULL DEFAULT NULL,
  `communication_id` INT(11) NULL DEFAULT NULL,
  PRIMARY KEY (`communication_proficiency_id`),
  INDEX `fk_communication_proficiency_communication1_idx` (`communication_id` ASC)  ,
  CONSTRAINT `fk_communication_proficiency_communication1`
    FOREIGN KEY (`communication_id`)
    REFERENCES `spd_medium`.`communication` (`communication_id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Spoken language proficiency\\\\\\\\nURL: http://hl7.org/fhir/uv/vhdir/StructureDefinition/communication-proficiency\\\\\\\\nBinding: VhDir Spoken Language Proficiency';


-- -----------------------------------------------------
-- Table `spd_medium`.`consent`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `spd_medium`.`consent` ;

CREATE TABLE IF NOT EXISTS `spd_medium`.`consent` (
  `consent_id` INT(11) NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (`consent_id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = latin1;


-- -----------------------------------------------------
-- Table `spd_medium`.`contact`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `spd_medium`.`contact` ;

CREATE TABLE IF NOT EXISTS `spd_medium`.`contact` (
  `contact_id` INT(11) NOT NULL AUTO_INCREMENT,
  `purpose_cc_id` INT(11) NULL DEFAULT NULL,
  `name_id` INT(11) NULL DEFAULT NULL,
  `address_id` INT(11) NULL DEFAULT NULL,
  `insurance_plan_id` INT(11) NULL DEFAULT NULL COMMENT 'The insurance plan this contact is applicable for',
  `network_id` INT(11) NULL DEFAULT NULL COMMENT 'The network this contact is applicable for',
  PRIMARY KEY (`contact_id`),
  INDEX `fk_contact_fhir_codeable_concept1_idx` (`purpose_cc_id` ASC)  ,
  INDEX `fk_contact_name1_idx` (`name_id` ASC)  ,
  INDEX `fk_contact_address1_idx` (`address_id` ASC)  ,
  INDEX `fk_contact_vhdir_insurance_plan1_idx` (`insurance_plan_id` ASC)  ,
  INDEX `fk_contact_vhdir_network1_idx` (`network_id` ASC)  ,
  CONSTRAINT `fk_contact_address1`
    FOREIGN KEY (`address_id`)
    REFERENCES `spd_medium`.`address` (`address_id`),
  CONSTRAINT `fk_contact_fhir_codeable_concept1`
    FOREIGN KEY (`purpose_cc_id`)
    REFERENCES `spd_medium`.`fhir_codeable_concept` (`codeable_concept_id`),
  CONSTRAINT `fk_contact_name1`
    FOREIGN KEY (`name_id`)
    REFERENCES `spd_medium`.`name` (`name_id`),
  CONSTRAINT `fk_contact_vhdir_insurance_plan1`
    FOREIGN KEY (`insurance_plan_id`)
    REFERENCES `spd_medium`.`vhdir_insurance_plan` (`insurance_plan_id`),
  CONSTRAINT `fk_contact_vhdir_network1`
    FOREIGN KEY (`network_id`)
    REFERENCES `spd_medium`.`vhdir_network` (`network_id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Has optional purpose codeable concept,\noptional name, optional address, and\n0 to many telecoms';


-- -----------------------------------------------------
-- Table `spd_medium`.`cost_benefit`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `spd_medium`.`cost_benefit` ;

CREATE TABLE IF NOT EXISTS `spd_medium`.`cost_benefit` (
  `cost_benefit_id` INT(11) NOT NULL,
  `type_cc_id` INT(11) NOT NULL COMMENT 'Binding: VhDir Insurance Plan Benefit Type (example)',
  `specific_cost_id` INT(11) NULL,
  PRIMARY KEY (`cost_benefit_id`),
  INDEX `fk_cost_benefit_fhir_codeable_concept1_idx` (`type_cc_id` ASC)  ,
  INDEX `fk_cost_benefit_specific_cost1_idx` (`specific_cost_id` ASC)  ,
  CONSTRAINT `fk_cost_benefit_fhir_codeable_concept1`
    FOREIGN KEY (`type_cc_id`)
    REFERENCES `spd_medium`.`fhir_codeable_concept` (`codeable_concept_id`),
  CONSTRAINT `fk_cost_benefit_specific_cost1`
    FOREIGN KEY (`specific_cost_id`)
    REFERENCES `spd_medium`.`specific_cost` (`specific_cost_id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Part of a specifect cost\nHas a mandatory type codeable concept and one to many individual costs.';


-- -----------------------------------------------------
-- Table `spd_medium`.`cost_benefit_individual_cost`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `spd_medium`.`cost_benefit_individual_cost` ;

CREATE TABLE IF NOT EXISTS `spd_medium`.`cost_benefit_individual_cost` (
  `cost_benefit_individual_cost_id` INT(11) NOT NULL AUTO_INCREMENT,
  `type_cc_id` INT(11) NOT NULL COMMENT 'Binding: VhDir Insurance Plan Benefit Cost Type (example)',
  `applicability_cc_id` INT(11) NULL DEFAULT NULL,
  `value` INT(11) NULL DEFAULT NULL,
  `cost_benefit_id` INT(11) NULL DEFAULT NULL COMMENT 'The specific cost benefit to which this belongs',
  PRIMARY KEY (`cost_benefit_individual_cost_id`),
  INDEX `fk_cost_benefit_individual_cost_fhir_codeable_concept1_idx` (`type_cc_id` ASC)  ,
  INDEX `fk_cost_benefit_individual_cost_cost_benefit1_idx` (`cost_benefit_id` ASC)  ,
  INDEX `fk_cost_benefit_individual_cost_fhir_codeable_concept2_idx` (`applicability_cc_id` ASC)  ,
  CONSTRAINT `fk_cost_benefit_individual_cost_cost_benefit1`
    FOREIGN KEY (`cost_benefit_id`)
    REFERENCES `spd_medium`.`cost_benefit` (`cost_benefit_id`),
  CONSTRAINT `fk_cost_benefit_individual_cost_fhir_codeable_concept1`
    FOREIGN KEY (`type_cc_id`)
    REFERENCES `spd_medium`.`fhir_codeable_concept` (`codeable_concept_id`),
  CONSTRAINT `fk_cost_benefit_individual_cost_fhir_codeable_concept2`
    FOREIGN KEY (`applicability_cc_id`)
    REFERENCES `spd_medium`.`fhir_codeable_concept` (`codeable_concept_id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Part of a specific cost benefit.\nHas mandadory type codeable concept and 0 to many qulifier codeable concepts.';


-- -----------------------------------------------------
-- Table `spd_medium`.`coverage`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `spd_medium`.`coverage` ;

CREATE TABLE IF NOT EXISTS `spd_medium`.`coverage` (
  `coverage_id` INT(11) NOT NULL AUTO_INCREMENT,
  `type_cc_id` INT(11) NOT NULL COMMENT 'Type of coverage (Medical; Dental; Mental Health; Substance Abuse; Vision; Drug; Short Term; Long Term Care; Hospice; Home Health).\nBinding: VhDir Coverage Type (example)',
  `insurance_plan_id` INT(11) NULL DEFAULT NULL COMMENT 'VHDIR Insurance Plan',
  PRIMARY KEY (`coverage_id`),
  INDEX `fk_coverage_fhir_codeable_concept1_idx` (`type_cc_id` ASC)  ,
  INDEX `fk_coverage_vhdir_insurance_plan1_idx` (`insurance_plan_id` ASC)  ,
  CONSTRAINT `fk_coverage_fhir_codeable_concept1`
    FOREIGN KEY (`type_cc_id`)
    REFERENCES `spd_medium`.`fhir_codeable_concept` (`codeable_concept_id`),
  CONSTRAINT `fk_coverage_vhdir_insurance_plan1`
    FOREIGN KEY (`insurance_plan_id`)
    REFERENCES `spd_medium`.`vhdir_insurance_plan` (`insurance_plan_id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Details about the coverage offered by the insurance product.\n\nHas mandatory type codeable concept\n\nHas at least one plan benefit\n\nHas 0 to many newtorks\n\nReferenced by insurance plan\n\n';


-- -----------------------------------------------------
-- Table `spd_medium`.`digital_certificate`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `spd_medium`.`digital_certificate` ;

CREATE TABLE IF NOT EXISTS `spd_medium`.`digital_certificate` (
  `digital_certificate_id` INT(11) NOT NULL AUTO_INCREMENT,
  `type` VARCHAR(45) NOT NULL,
  `certificate` VARCHAR(1024) NOT NULL,
  `expiration` DATE NOT NULL,
  `url` VARCHAR(256) NOT NULL DEFAULT 'http://hl7.org/fhir/uv/vhdir/StructureDefinition/digitalcertificate',
  `use` VARCHAR(45) NULL DEFAULT NULL,
  `certificate_standard` VARCHAR(45) NULL DEFAULT NULL,
  `practitioner_role_id` INT(11) NULL DEFAULT NULL,
  `organization_id` INT(11) NULL DEFAULT NULL COMMENT 'Organization\'s digital certificate\\\\\\\\nURL: http://hl7.org/fhir/uv/vhdir/StructureDefinition/digitalcertificate',
  `endpoint_id` INT(11) NULL DEFAULT NULL COMMENT 'Digital certificate associated with the endpoint\\\\\\\\nURL: http://hl7.org/fhir/uv/vhdir/StructureDefinition/digitalcertificate',
  `practitioner_id` INT(11) NULL DEFAULT NULL COMMENT 'Practitioner\'s digital certificate\\\\\\\\nURL: http://hl7.org/fhir/uv/vhdir/StructureDefinition/digitalcertificate',
  PRIMARY KEY (`digital_certificate_id`),
  INDEX `fk_digital_certificate_practitioner_role1_idx` (`practitioner_role_id` ASC)  ,
  INDEX `fk_digital_certificate_organization1_idx` (`organization_id` ASC)  ,
  INDEX `fk_digital_certificate_endpoint1_idx` (`endpoint_id` ASC)  ,
  INDEX `fk_digital_certificate_practitioner1_idx` (`practitioner_id` ASC)  ,
  CONSTRAINT `fk_digital_certificate_endpoint1`
    FOREIGN KEY (`endpoint_id`)
    REFERENCES `spd_medium`.`vhdir_endpoint` (`endpoint_id`),
  CONSTRAINT `fk_digital_certificate_organization1`
    FOREIGN KEY (`organization_id`)
    REFERENCES `spd_medium`.`vhdir_organization` (`organization_id`),
  CONSTRAINT `fk_digital_certificate_practitioner1`
    FOREIGN KEY (`practitioner_id`)
    REFERENCES `spd_medium`.`vhdir_practitioner` (`practitioner_id`),
  CONSTRAINT `fk_digital_certificate_practitioner_role1`
    FOREIGN KEY (`practitioner_role_id`)
    REFERENCES `spd_medium`.`vhdir_practitioner_role` (`practitioner_role_id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'An extension to describe digital certificates.\nConsists of:\n\ndigitalCertificate.type - indicates the type of digital certificate\n\ndigitalCertificate.use - indicates the purpose of the digital certificate\n\ndigitalCertificate.certificateStandard - indicates the certificate standard (currently only x.509v3 certificates are supported\n\ndigitalCertificate.certificate - a string representation of a PEM format certificate, or a URI for locating the certificate\n\ndigitalCertificate.expirationDate - indicates when the certificate expires\n\ndigitalCertificate.trustFramework - indicates any trust frameworks supported by the certificate\n\ndigitalCertificate is an extension to the practitioner, organization, practitionerRole, and endpoint resources.\n\nHas manadtory type code, 0 to many value codes, mandatory certificate uri, mandatory expriation date, and 0 to many trust framework codeable concepts.\n\nReferenced by practiioner, practitioner role, organization, and endpoint\n';


-- -----------------------------------------------------
-- Table `spd_medium`.`ehr`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `spd_medium`.`ehr` ;

CREATE TABLE IF NOT EXISTS `spd_medium`.`ehr` (
  `vhdir_ehr_id` INT(11) NOT NULL AUTO_INCREMENT,
  `developer` VARCHAR(45) NOT NULL,
  `product` VARCHAR(45) NULL,
  `version` VARCHAR(45) NULL,
  `certification_edition` VARCHAR(45) NULL DEFAULT NULL COMMENT 'Certification edition\nBinding: VhDir Certification Edition Value Set (example)',
  `certification_ID` VARCHAR(45) NOT NULL,
  `patient_access_cc_id` INT(11) NULL DEFAULT NULL COMMENT 'Patient access\nBinding: VhDir Ehr Patient Access Value Set (example)',
  `location_id` INT(11) NULL DEFAULT NULL COMMENT 'EHR at the location\\\\nURL: http://hl7.org/fhir/uv/vhdir/StructureDefinition/ehr',
  `url` VARCHAR(256) NOT NULL DEFAULT 'http://hl7.org/fhir/uv/vhdir/StructureDefinition/ehr',
  PRIMARY KEY (`vhdir_ehr_id`),
  INDEX `fk_vhdir_ehr_fhir_codeable_concept1_idx` (`patient_access_cc_id` ASC)  ,
  INDEX `fk_vhdir_ehr_vhdir_location1_idx` (`location_id` ASC)  ,
  CONSTRAINT `fk_vhdir_ehr_fhir_codeable_concept1`
    FOREIGN KEY (`patient_access_cc_id`)
    REFERENCES `spd_medium`.`fhir_codeable_concept` (`codeable_concept_id`),
  CONSTRAINT `fk_vhdir_ehr_vhdir_location1`
    FOREIGN KEY (`location_id`)
    REFERENCES `spd_medium`.`vhdir_location` (`location_id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'An extension to describe the electronic health record (EHR) product(s) in use at a location.\nConsists of:\n\nehr.developer - indicates the developer of the EHR product\n\nehr.product - indicates the name of the EHR product\n\nehr.version - indicates the version of the EHR product\n\nehr.certificationEdition - indicates whether the product has been certified, and to which certification edition\n\nehr.patientAccess - indicates whether the EHR product provides capabilities to support patient engagement\n\nehr.certificationID - A unique ID assigned by the ONC-authorized certification body (ONC-ACB) certifying the EHR product\n\nUsers should refer to the ONC Certified Health IT Product List (CHPL) for further guidance on describing the developer, product, and version of an EHR.\n\nHas mandatory url\n\nHas optional developer string, product string, version string, certification edition code, certification ID string.\n\nHas 0 to many patient access codeable concepts. \n\nReferenced by location.\nReferenced';


-- -----------------------------------------------------
-- Table `spd_medium`.`eligibility`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `spd_medium`.`eligibility` ;

CREATE TABLE IF NOT EXISTS `spd_medium`.`eligibility` (
  `eligibility_id` INT(11) NOT NULL AUTO_INCREMENT,
  `code_cc_id` INT(11) NULL DEFAULT NULL COMMENT 'Coded value for the eligibility\\\\nBinding: (unbound) (example)',
  `comment` VARCHAR(45) NULL DEFAULT NULL COMMENT 'Describes the eligibility conditions for the service',
  `healthcare_service_id` INT(11) NULL DEFAULT NULL COMMENT 'Specific eligibility requirements required to use the service',
  PRIMARY KEY (`eligibility_id`),
  INDEX `fk_eligibility_fhir_codeable_concept1_idx` (`code_cc_id` ASC)  ,
  INDEX `fk_eligibility_vhdir_healthcare_service1_idx` (`healthcare_service_id` ASC)  ,
  CONSTRAINT `fk_eligibility_fhir_codeable_concept1`
    FOREIGN KEY (`code_cc_id`)
    REFERENCES `spd_medium`.`fhir_codeable_concept` (`codeable_concept_id`),
  CONSTRAINT `fk_eligibility_vhdir_healthcare_service1`
    FOREIGN KEY (`healthcare_service_id`)
    REFERENCES `spd_medium`.`vhdir_healthcare_service` (`healthcare_service_id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Answers Does this service have specific eligibility requirements that need to be met in order to use the service?\nAll FHIR elements must have a @value or children (: hasValue() or (children().count() > id.count()))\n\nHas optional code codeable concpet and comment.';


-- -----------------------------------------------------
-- Table `spd_medium`.`encounter_reference`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `spd_medium`.`encounter_reference` ;

CREATE TABLE IF NOT EXISTS `spd_medium`.`encounter_reference` (
  `encounter_id` INT(11) NOT NULL,
  PRIMARY KEY (`encounter_id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Refernced by careteam.\n\nReference ID to an encounter resource.\nThe Encounter during which this CareTeam was created or to which the creation of this record is tightly associated.\n\nThis will typically be the encounter the event occurred within, but some activities may be initiated prior to or after the official completion of an encounter but still be tied to the context of the encounter.\n\n';


-- -----------------------------------------------------
-- Table `spd_medium`.`endpoint_contact`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `spd_medium`.`endpoint_contact` ;

CREATE TABLE IF NOT EXISTS `spd_medium`.`endpoint_contact` (
  `endpoint_contact_id` INT(11) NOT NULL AUTO_INCREMENT,
  `period_start` DATETIME NULL DEFAULT NULL,
  `period_end` DATETIME NULL DEFAULT NULL,
  `via_intermediary` VARCHAR(45) NULL DEFAULT NULL COMMENT 'Needs to be a reference to one of (VhDir Practitioner Role | VhDir Organization | VhDir Organization Affiliation | VhDir Location)',
  `system` VARCHAR(45) NOT NULL COMMENT 'phone | fax | email | pager | url | sms | other',
  `value` VARCHAR(45) NOT NULL COMMENT 'The actual contact point details',
  `use` VARCHAR(45) NULL DEFAULT NULL COMMENT 'home | work | temp | old | mobile - purpose of this contact point',
  `rank` INT(11) NULL DEFAULT NULL COMMENT 'Specify preferred order of use (1 = highest)',
  PRIMARY KEY (`endpoint_contact_id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Contact details for a human to contact about the subscription. The primary use of this for system administrator troubleshooting.\n\nHas 0 to many available times, and an optional viaIntermediary.  Has mandatory system code, and value.   Optional use code, ranking and active period.';


-- -----------------------------------------------------
-- Table `spd_medium`.`fhir_codeable_concept`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `spd_medium`.`fhir_codeable_concept` ;

CREATE TABLE IF NOT EXISTS `spd_medium`.`fhir_codeable_concept` (
  `codeable_concept_id` INT(11) NOT NULL AUTO_INCREMENT,
  `text` VARCHAR(45) NULL DEFAULT NULL COMMENT 'Plain text representation of the concept',
  `coding_system` VARCHAR(45) NULL DEFAULT NULL COMMENT 'uri\\\\\\\\nIdentity of the terminology system',
  `coding_version` VARCHAR(45) NULL DEFAULT NULL,
  `coding_code` VARCHAR(45) NULL DEFAULT NULL COMMENT 'Symbol in syntax defined by the system',
  `coding_display` VARCHAR(45) NULL DEFAULT NULL COMMENT 'Representation defined by the system',
  `coding_user_selected` TINYINT(4) NULL DEFAULT NULL COMMENT 'If this coding was chosen directly by the user',
  `practitioner_role_specialty_id` INT(11) NULL DEFAULT NULL COMMENT 'Specific specialty of the practitioner\\\\\\\\nBinding: PracticeSettingCodeValueSet (preferred)',
  `practitioner_role_code_id` INT(11) NULL DEFAULT NULL COMMENT 'Roles which this practitioner may perform\\\\\\\\nBinding: PractitionerRole (example)',
  `organization_affiliation_code_id` INT(11) NULL DEFAULT NULL COMMENT 'Definition of the role the participatingOrganization plays',
  `organization_affiliation_specialty_id` INT(11) NULL DEFAULT NULL COMMENT 'Specific specialty of the participatingOrganization in the context of the role',
  `careteam_category_id` INT(11) NULL DEFAULT NULL COMMENT 'Type of team\\\\\\\\nBinding: CareTeamCategory (example)',
  `endpoint_payload_type_id` INT(11) NULL DEFAULT NULL COMMENT 'The type of content that may be used at this endpoint (e.g. XDS Discharge summaries)\\\\\\\\nBinding: EndpointPayloadType (example)',
  `organization_type_id` INT(11) NULL DEFAULT NULL COMMENT 'Kind of organization',
  `practitioner_accessibiliy_id` INT(11) NULL DEFAULT NULL COMMENT 'Accessibility options offered by practitioner\\\\\\\\nURL: http://hl7.org/fhir/uv/vhdir/StructureDefinition/accessibility\\\\\\\\nBinding: VhDir Accessibility Value Set (example)',
  `qualification_communication_id` INT(11) NULL DEFAULT NULL COMMENT 'A language the practitioner can use in patient communication\\\\\\\\nBinding: CommonLanguages (preferred)',
  `healthcare_service_category_id` INT(11) NULL DEFAULT NULL COMMENT 'Broad category of service being performed or delivered\\\\\\\\nBinding: ServiceCategory (example)',
  `healthcare_service_type_id` INT(11) NULL DEFAULT NULL COMMENT 'Type of service that may be delivered or performed\\\\\\\\nBinding: ServiceType (example)',
  `healthcare_service_specialty_id` INT(11) NULL DEFAULT NULL COMMENT 'Specialties handled by the HealthcareService\\\\\\\\nBinding: PracticeSettingCodeValueSet (preferred)',
  `healthcare_service_service_provision_code_id` INT(11) NULL DEFAULT NULL COMMENT 'Conditions under which service is available/offered\\\\\\\\nBinding: ServiceProvisionConditions (example)',
  `healthcare_service_program_id` INT(11) NULL DEFAULT NULL COMMENT 'Programs that this service is applicable to\\\\\\\\nBinding: Program (example)',
  `healthcare_service_characteristic_id` INT(11) NULL DEFAULT NULL COMMENT 'Collection of characteristics (attributes)\\\\\\\\nBinding: VhDir Healthcare Service Characteristic (example)',
  `healthcare_service_communication_id` INT(11) NULL DEFAULT NULL COMMENT 'The language that this service is offered in\\\\\\\\nBinding: CommonLanguages (preferred)',
  `healthcare_service_referral_method_id` INT(11) NULL DEFAULT NULL COMMENT 'Ways that the service accepts referrals\\\\\\\\nBinding: ReferralMethod (example)',
  `location_accessibility_id` INT(11) NULL DEFAULT NULL COMMENT 'Accessibility options offered by the location\\\\\\\\nURL: http://hl7.org/fhir/uv/vhdir/StructureDefinition/accessibility',
  `location_type_id` INT(11) NULL DEFAULT NULL COMMENT 'Type of function performed\\\\\\\\nBinding: V3 Value SetServiceDeliveryLocationRoleType (extensible)',
  `network_type_id` INT(11) NULL DEFAULT NULL COMMENT 'Type of network\\\\\\\\nBinding: VhDir Network Type Value Set (example)',
  `insurance_plan_type_id` INT(11) NULL DEFAULT NULL COMMENT 'Kind of product\\\\\\\\nBinding: InsurancePlanType (example)',
  `validation_process_id` INT(11) NULL DEFAULT NULL COMMENT 'The process(es) by which the target is validated\\\\\\\\nBinding: VhDir Validation Process (example)',
  `careteam_participant_role_id` INT(11) NULL DEFAULT NULL COMMENT 'Members of the care team',
  `primary_source_type_id` INT(11) NULL DEFAULT NULL COMMENT 'Type of primary source\\\\nBinding: primary-source-type (example)',
  `primary_source_communication_method_id` INT(11) NULL DEFAULT NULL,
  `primary_source_push_type_available_id` INT(11) NULL DEFAULT NULL,
  `plan_cost_qualifier` INT(11) NULL DEFAULT NULL COMMENT 'Binding: VhDir Insurance Plan Cost Qualifier (example)',
  `qualification_where_valid_id` INT(11) NULL COMMENT 'Where a qualification is valid',
  `restriction_category_id` INT(11) NULL,
  PRIMARY KEY (`codeable_concept_id`),
  INDEX `fk_codeable_concept_practitioner_role1_idx` (`practitioner_role_specialty_id` ASC)  ,
  INDEX `fk_codeable_concept_practitioner_role2_idx` (`practitioner_role_code_id` ASC)  ,
  INDEX `fk_codeable_concept_organization_affiliation1_idx` (`organization_affiliation_code_id` ASC)  ,
  INDEX `fk_codeable_concept_organization_affiliation2_idx` (`organization_affiliation_specialty_id` ASC)  ,
  INDEX `fk_codeable_concept_careteam2_idx` (`careteam_category_id` ASC)  ,
  INDEX `fk_codeable_concept_endpoint1_idx` (`endpoint_payload_type_id` ASC)  ,
  INDEX `fk_codeable_concept_organization1_idx` (`organization_type_id` ASC)  ,
  INDEX `fk_codeable_concept_practitioner1_idx` (`practitioner_accessibiliy_id` ASC)  ,
  INDEX `fk_codeable_concept_qualification1_idx` (`qualification_communication_id` ASC)  ,
  INDEX `fk_codeable_concept_healthcare_service1_idx` (`healthcare_service_category_id` ASC)  ,
  INDEX `fk_codeable_concept_healthcare_service2_idx` (`healthcare_service_type_id` ASC)  ,
  INDEX `fk_codeable_concept_healthcare_service3_idx` (`healthcare_service_specialty_id` ASC)  ,
  INDEX `fk_codeable_concept_healthcare_service4_idx` (`healthcare_service_service_provision_code_id` ASC)  ,
  INDEX `fk_codeable_concept_healthcare_service5_idx` (`healthcare_service_program_id` ASC)  ,
  INDEX `fk_codeable_concept_healthcare_service6_idx` (`healthcare_service_characteristic_id` ASC)  ,
  INDEX `fk_codeable_concept_healthcare_service7_idx` (`healthcare_service_communication_id` ASC)  ,
  INDEX `fk_codeable_concept_healthcare_service8_idx` (`healthcare_service_referral_method_id` ASC)  ,
  INDEX `fk_codeable_concept_location1_idx` (`location_accessibility_id` ASC)  ,
  INDEX `fk_codeable_concept_location2_idx` (`location_type_id` ASC)  ,
  INDEX `fk_codeable_concept_network1_idx` (`network_type_id` ASC)  ,
  INDEX `fk_codeable_concept_insurance_plan1_idx` (`insurance_plan_type_id` ASC)  ,
  INDEX `fk_codeable_concept_validation1_idx` (`validation_process_id` ASC)  ,
  INDEX `fk_fhir_codeable_concept_participant1_idx` (`careteam_participant_role_id` ASC)  ,
  INDEX `fk_fhir_codeable_concept_primary_source1_idx` (`primary_source_type_id` ASC)  ,
  INDEX `fk_fhir_codeable_concept_primary_source2_idx` (`primary_source_communication_method_id` ASC)  ,
  INDEX `fk_fhir_codeable_concept_primary_source3_idx` (`primary_source_push_type_available_id` ASC)  ,
  INDEX `fk_fhir_codeable_concept_cost_benefit_individual_cost1_idx` (`plan_cost_qualifier` ASC)  ,
  INDEX `fk_fhir_codeable_concept_qualification1_idx` (`qualification_where_valid_id` ASC)  ,
  INDEX `fk_fhir_codeable_concept_vhdir_restriction1_idx` (`restriction_category_id` ASC)  ,
  CONSTRAINT `fk_codeable_concept_careteam2`
    FOREIGN KEY (`careteam_category_id`)
    REFERENCES `spd_medium`.`vhdir_careteam` (`careteam_id`),
  CONSTRAINT `fk_codeable_concept_endpoint1`
    FOREIGN KEY (`endpoint_payload_type_id`)
    REFERENCES `spd_medium`.`vhdir_endpoint` (`endpoint_id`),
  CONSTRAINT `fk_codeable_concept_healthcare_service1`
    FOREIGN KEY (`healthcare_service_category_id`)
    REFERENCES `spd_medium`.`vhdir_healthcare_service` (`healthcare_service_id`),
  CONSTRAINT `fk_codeable_concept_healthcare_service2`
    FOREIGN KEY (`healthcare_service_type_id`)
    REFERENCES `spd_medium`.`vhdir_healthcare_service` (`healthcare_service_id`),
  CONSTRAINT `fk_codeable_concept_healthcare_service3`
    FOREIGN KEY (`healthcare_service_specialty_id`)
    REFERENCES `spd_medium`.`vhdir_healthcare_service` (`healthcare_service_id`),
  CONSTRAINT `fk_codeable_concept_healthcare_service4`
    FOREIGN KEY (`healthcare_service_service_provision_code_id`)
    REFERENCES `spd_medium`.`vhdir_healthcare_service` (`healthcare_service_id`),
  CONSTRAINT `fk_codeable_concept_healthcare_service5`
    FOREIGN KEY (`healthcare_service_program_id`)
    REFERENCES `spd_medium`.`vhdir_healthcare_service` (`healthcare_service_id`),
  CONSTRAINT `fk_codeable_concept_healthcare_service6`
    FOREIGN KEY (`healthcare_service_characteristic_id`)
    REFERENCES `spd_medium`.`vhdir_healthcare_service` (`healthcare_service_id`),
  CONSTRAINT `fk_codeable_concept_healthcare_service7`
    FOREIGN KEY (`healthcare_service_communication_id`)
    REFERENCES `spd_medium`.`vhdir_healthcare_service` (`healthcare_service_id`),
  CONSTRAINT `fk_codeable_concept_healthcare_service8`
    FOREIGN KEY (`healthcare_service_referral_method_id`)
    REFERENCES `spd_medium`.`vhdir_healthcare_service` (`healthcare_service_id`),
  CONSTRAINT `fk_codeable_concept_insurance_plan1`
    FOREIGN KEY (`insurance_plan_type_id`)
    REFERENCES `spd_medium`.`vhdir_insurance_plan` (`insurance_plan_id`),
  CONSTRAINT `fk_codeable_concept_location1`
    FOREIGN KEY (`location_accessibility_id`)
    REFERENCES `spd_medium`.`vhdir_location` (`location_id`),
  CONSTRAINT `fk_codeable_concept_location2`
    FOREIGN KEY (`location_type_id`)
    REFERENCES `spd_medium`.`vhdir_location` (`location_id`),
  CONSTRAINT `fk_codeable_concept_network1`
    FOREIGN KEY (`network_type_id`)
    REFERENCES `spd_medium`.`vhdir_network` (`network_id`),
  CONSTRAINT `fk_codeable_concept_organization1`
    FOREIGN KEY (`organization_type_id`)
    REFERENCES `spd_medium`.`vhdir_organization` (`organization_id`),
  CONSTRAINT `fk_codeable_concept_organization_affiliation1`
    FOREIGN KEY (`organization_affiliation_code_id`)
    REFERENCES `spd_medium`.`vhdir_organization_affiliation` (`organization_affiliation_id`),
  CONSTRAINT `fk_codeable_concept_organization_affiliation2`
    FOREIGN KEY (`organization_affiliation_specialty_id`)
    REFERENCES `spd_medium`.`vhdir_organization_affiliation` (`organization_affiliation_id`),
  CONSTRAINT `fk_codeable_concept_practitioner1`
    FOREIGN KEY (`practitioner_accessibiliy_id`)
    REFERENCES `spd_medium`.`vhdir_practitioner` (`practitioner_id`),
  CONSTRAINT `fk_codeable_concept_practitioner_role1`
    FOREIGN KEY (`practitioner_role_specialty_id`)
    REFERENCES `spd_medium`.`vhdir_practitioner_role` (`practitioner_role_id`),
  CONSTRAINT `fk_codeable_concept_practitioner_role2`
    FOREIGN KEY (`practitioner_role_code_id`)
    REFERENCES `spd_medium`.`vhdir_practitioner_role` (`practitioner_role_id`),
  CONSTRAINT `fk_codeable_concept_qualification1`
    FOREIGN KEY (`qualification_communication_id`)
    REFERENCES `spd_medium`.`qualification` (`qualification_id`),
  CONSTRAINT `fk_codeable_concept_validation1`
    FOREIGN KEY (`validation_process_id`)
    REFERENCES `spd_medium`.`vhdir_validation` (`validation_id`),
  CONSTRAINT `fk_fhir_codeable_concept_cost_benefit_individual_cost1`
    FOREIGN KEY (`plan_cost_qualifier`)
    REFERENCES `spd_medium`.`cost_benefit_individual_cost` (`cost_benefit_individual_cost_id`),
  CONSTRAINT `fk_fhir_codeable_concept_participant1`
    FOREIGN KEY (`careteam_participant_role_id`)
    REFERENCES `spd_medium`.`participant` (`participant_id`),
  CONSTRAINT `fk_fhir_codeable_concept_primary_source1`
    FOREIGN KEY (`primary_source_type_id`)
    REFERENCES `spd_medium`.`primary_source` (`primary_source_id`),
  CONSTRAINT `fk_fhir_codeable_concept_primary_source2`
    FOREIGN KEY (`primary_source_communication_method_id`)
    REFERENCES `spd_medium`.`primary_source` (`primary_source_id`),
  CONSTRAINT `fk_fhir_codeable_concept_primary_source3`
    FOREIGN KEY (`primary_source_push_type_available_id`)
    REFERENCES `spd_medium`.`primary_source` (`primary_source_id`),
  CONSTRAINT `fk_fhir_codeable_concept_qualification1`
    FOREIGN KEY (`qualification_where_valid_id`)
    REFERENCES `spd_medium`.`qualification` (`qualification_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_fhir_codeable_concept_vhdir_restriction1`
    FOREIGN KEY (`restriction_category_id`)
    REFERENCES `spd_medium`.`vhdir_restriction` (`restriction_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'This table models the data elements for a FHIR codeable concept, plus an extra \"text\" field for easy use of dislplay.\n\nReference by nearly every table in the model.';


-- -----------------------------------------------------
-- Table `spd_medium`.`fhir_meta_data`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `spd_medium`.`fhir_meta_data` ;

CREATE TABLE IF NOT EXISTS `spd_medium`.`fhir_meta_data` (
  `meta_data_id` INT(11) NOT NULL AUTO_INCREMENT,
  `type` VARCHAR(45) NULL DEFAULT NULL COMMENT 'MetaDataTypes \\\\\\\\nContactDetail\\\\\\\\nMetaData Types:\\\\\\\\n   Contributor\\\\\\\\n   DataRequirement\\\\\\\\n   Expression\\\\\\\\n   ParameterDefinition\\\\\\\\n   RelatedArtifact\\\\\\\\n   TriggerDefinition\\\\\\\\nUsageContext',
  `implicit_rules_uri` VARCHAR(45) NULL DEFAULT NULL COMMENT 'A set of rules under which this content was created',
  `language` VARCHAR(45) NULL DEFAULT NULL COMMENT 'Language of the resource content\\\\\\\\nBinding: CommonLanguages (preferred)',
  `text` VARCHAR(45) NULL DEFAULT NULL COMMENT 'Text summary of the resource, for human interpretation',
  PRIMARY KEY (`meta_data_id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'This table holds the meta data elements common to any resource.\n\nFirst class proifles and resources all have FHIR meta data elements.';


-- -----------------------------------------------------
-- Table `spd_medium`.`general_cost`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `spd_medium`.`general_cost` ;

CREATE TABLE IF NOT EXISTS `spd_medium`.`general_cost` (
  `general_cost_id` INT(11) NOT NULL AUTO_INCREMENT,
  `plan_id` INT(11) NULL DEFAULT NULL,
  `type_cc_id` INT(11) NULL DEFAULT NULL COMMENT 'Binding: VhDir Insurance Plan Cost Type (example)',
  `group_size` INT(11) NULL DEFAULT NULL,
  `cost` INT(11) NULL DEFAULT NULL,
  `comment` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`general_cost_id`),
  INDEX `fk_general_cost_plan1_idx` (`plan_id` ASC)  ,
  INDEX `fk_general_cost_fhir_codeable_concept1_idx` (`type_cc_id` ASC)  ,
  CONSTRAINT `fk_general_cost_fhir_codeable_concept1`
    FOREIGN KEY (`type_cc_id`)
    REFERENCES `spd_medium`.`fhir_codeable_concept` (`codeable_concept_id`),
  CONSTRAINT `fk_general_cost_plan1`
    FOREIGN KEY (`plan_id`)
    REFERENCES `spd_medium`.`plan` (`plan_id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Part of a plan.\nHas optional type codeable concept,\noptional group size, optional cost and optional comment.';


-- -----------------------------------------------------
-- Table `spd_medium`.`identifier`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `spd_medium`.`identifier` ;

CREATE TABLE IF NOT EXISTS `spd_medium`.`identifier` (
  `identifier_id` INT(11) NOT NULL AUTO_INCREMENT,
  `identifier_status` VARCHAR(15) NULL,
  `identifier_status_value_code` VARCHAR(45) NULL COMMENT 'active|inactive|issued in error|revoked|pending\nBinding: VhDir Identifier Status Value Set (example)',
  `use` VARCHAR(15) NULL DEFAULT NULL,
  `system` VARCHAR(45) NULL DEFAULT NULL,
  `value` VARCHAR(45) NULL DEFAULT NULL,
  `type_cc_id` INT(11) NULL DEFAULT NULL,
  `period_start` DATETIME NULL DEFAULT NULL,
  `period_end` DATETIME NULL DEFAULT NULL,
  `endpoint_identifier_id` INT(11) NULL DEFAULT NULL COMMENT 'Identifies this endpoint across multiple systems',
  `healthcare_service_id` INT(11) NULL DEFAULT NULL,
  `insurance_plan_id` INT(11) NULL DEFAULT NULL COMMENT 'Business Identifier for Product',
  `practitioner_role_id` INT(11) NULL DEFAULT NULL,
  `practitioner_id` INT(11) NULL DEFAULT NULL,
  `qualification_id` INT(11) NULL DEFAULT NULL COMMENT 'An identifier for this qualification for the practitioner',
  `organization_id` INT(11) NULL DEFAULT NULL COMMENT 'Identifies this organization across multiple systems',
  `organization_affiliation_id` INT(11) NULL DEFAULT NULL,
  `careteam_id` INT(11) NULL DEFAULT NULL COMMENT 'External Ids for this team',
  `location_id` INT(11) NULL DEFAULT NULL COMMENT 'Unique code or number identifying the location to its users',
  `network_id` INT(11) NULL DEFAULT NULL COMMENT 'Identifies this network across multiple systems',
  `plan_id` INT(11) NULL DEFAULT NULL COMMENT 'Business identifier for plan',
  PRIMARY KEY (`identifier_id`),
  INDEX `endpoint_id_idx` (`endpoint_identifier_id` ASC)  ,
  INDEX `healthcare_service_id_idx` (`healthcare_service_id` ASC)  ,
  INDEX `insurance_plan_id_idx` (`insurance_plan_id` ASC)  ,
  INDEX `practitioner_role_id_idx` (`practitioner_role_id` ASC)  ,
  INDEX `practitioner_id_idx` (`practitioner_id` ASC)  ,
  INDEX `fk_identifier_qualification1_idx` (`qualification_id` ASC)  ,
  INDEX `fk_identifier_codeable_concept1_idx` (`type_cc_id` ASC)  ,
  INDEX `fk_identifier_organization1_idx` (`organization_id` ASC)  ,
  INDEX `fk_identifier_organization_affiliation1_idx` (`organization_affiliation_id` ASC)  ,
  INDEX `fk_identifier_careteam1_idx` (`careteam_id` ASC)  ,
  INDEX `fk_identifier_location1_idx` (`location_id` ASC)  ,
  INDEX `fk_identifier_network1_idx` (`network_id` ASC)  ,
  INDEX `fk_identifier_plan1_idx` (`plan_id` ASC)  ,
  CONSTRAINT `fk_identifier_careteam1`
    FOREIGN KEY (`careteam_id`)
    REFERENCES `spd_medium`.`vhdir_careteam` (`careteam_id`),
  CONSTRAINT `fk_identifier_codeable_concept1`
    FOREIGN KEY (`type_cc_id`)
    REFERENCES `spd_medium`.`fhir_codeable_concept` (`codeable_concept_id`),
  CONSTRAINT `fk_identifier_location1`
    FOREIGN KEY (`location_id`)
    REFERENCES `spd_medium`.`vhdir_location` (`location_id`),
  CONSTRAINT `fk_identifier_network1`
    FOREIGN KEY (`network_id`)
    REFERENCES `spd_medium`.`vhdir_network` (`network_id`),
  CONSTRAINT `fk_identifier_organization1`
    FOREIGN KEY (`organization_id`)
    REFERENCES `spd_medium`.`vhdir_organization` (`organization_id`),
  CONSTRAINT `fk_identifier_organization_affiliation1`
    FOREIGN KEY (`organization_affiliation_id`)
    REFERENCES `spd_medium`.`vhdir_organization_affiliation` (`organization_affiliation_id`),
  CONSTRAINT `fk_identifier_plan1`
    FOREIGN KEY (`plan_id`)
    REFERENCES `spd_medium`.`plan` (`plan_id`),
  CONSTRAINT `fk_identifier_qualification1`
    FOREIGN KEY (`qualification_id`)
    REFERENCES `spd_medium`.`qualification` (`qualification_id`),
  CONSTRAINT `identifier_endpoint_id`
    FOREIGN KEY (`endpoint_identifier_id`)
    REFERENCES `spd_medium`.`vhdir_endpoint` (`endpoint_id`)
    ON DELETE CASCADE,
  CONSTRAINT `identifier_healthcare_service_id`
    FOREIGN KEY (`healthcare_service_id`)
    REFERENCES `spd_medium`.`vhdir_healthcare_service` (`healthcare_service_id`)
    ON DELETE CASCADE,
  CONSTRAINT `identifier_insurance_plan_id`
    FOREIGN KEY (`insurance_plan_id`)
    REFERENCES `spd_medium`.`vhdir_insurance_plan` (`insurance_plan_id`)
    ON DELETE CASCADE,
  CONSTRAINT `identifier_practitioner_id`
    FOREIGN KEY (`practitioner_id`)
    REFERENCES `spd_medium`.`vhdir_practitioner` (`practitioner_id`),
  CONSTRAINT `identifier_practitioner_role_id`
    FOREIGN KEY (`practitioner_role_id`)
    REFERENCES `spd_medium`.`vhdir_practitioner_role` (`practitioner_role_id`)
    ON DELETE CASCADE)
ENGINE = InnoDB
DEFAULT CHARACTER SET = latin1
COMMENT = 'An identifier that applies to this entiity in a particular role.\n\nHas a mandatory status code, active boolean and at least one human name.\n\nOptional use code, type codeable concept, system uri, value string, period and assigner Organization.\n\n';


-- -----------------------------------------------------
-- Table `spd_medium`.`limit`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `spd_medium`.`limit` ;

CREATE TABLE IF NOT EXISTS `spd_medium`.`limit` (
  `limit_id` INT(11) NOT NULL,
  `value` VARCHAR(45) NULL DEFAULT NULL COMMENT 'Quantity',
  `benefit_id` INT(11) NULL DEFAULT NULL,
  `code_cc_id` INT(11) NULL COMMENT 'Binding: VhDir Limit Unit (example)',
  PRIMARY KEY (`limit_id`),
  INDEX `fk_limit_benefit1_idx` (`benefit_id` ASC)  ,
  INDEX `fk_limit_fhir_codeable_concept1_idx` (`code_cc_id` ASC)  ,
  CONSTRAINT `fk_limit_benefit1`
    FOREIGN KEY (`benefit_id`)
    REFERENCES `spd_medium`.`plan_benefit` (`benefit_id`),
  CONSTRAINT `fk_limit_fhir_codeable_concept1`
    FOREIGN KEY (`code_cc_id`)
    REFERENCES `spd_medium`.`fhir_codeable_concept` (`codeable_concept_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `spd_medium`.`name`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `spd_medium`.`name` ;

CREATE TABLE IF NOT EXISTS `spd_medium`.`name` (
  `name_id` INT(11) NOT NULL AUTO_INCREMENT,
  `use` VARCHAR(45) NULL DEFAULT NULL,
  `text` VARCHAR(110) NULL DEFAULT NULL,
  `family` VARCHAR(45) NOT NULL,
  `given` VARCHAR(45) NOT NULL,
  `prefix` VARCHAR(5) NULL DEFAULT NULL,
  `suffix` VARCHAR(5) NULL DEFAULT NULL,
  `period_start` DATETIME NULL DEFAULT NULL,
  `period_end` DATETIME NULL DEFAULT NULL,
  `practitioner_id` INT(11) NULL DEFAULT NULL COMMENT 'The name(s) associated with the practitioner',
  PRIMARY KEY (`name_id`),
  INDEX `practitioner_id_idx` (`practitioner_id` ASC)  ,
  CONSTRAINT `name_practitioner_id`
    FOREIGN KEY (`practitioner_id`)
    REFERENCES `spd_medium`.`vhdir_practitioner` (`practitioner_id`)
    ON DELETE CASCADE)
ENGINE = InnoDB
DEFAULT CHARACTER SET = latin1
COMMENT = 'HumanName\n\nHas a mandatory family string, and at least one given name. \n\nOptional use code, text, prefix and suffix string. \n\nOptional active period start and end.\n\nReferenced by practitioner.';


-- -----------------------------------------------------
-- Table `spd_medium`.`new_patient_profile`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `spd_medium`.`new_patient_profile` ;

CREATE TABLE IF NOT EXISTS `spd_medium`.`new_patient_profile` (
  `new_patient_profile_id` INT(11) NOT NULL AUTO_INCREMENT,
  `url` VARCHAR(256) NOT NULL DEFAULT 'http://hl7.org/fhir/uv/vhdir/StructureDefinition/newpatientprofile/',
  `profile_string` VARCHAR(45) NOT NULL,
  `practitioner_role_id` INT(11) NULL DEFAULT NULL COMMENT 'Type of new patients accepted\\\\nURL: http://hl7.org/fhir/uv/vhdir/StructureDefinition/newpatientprofile',
  `location_id` INT(11) NOT NULL,
  PRIMARY KEY (`new_patient_profile_id`),
  INDEX `fk_new_patient_profile_vhdir_practitioner_role1_idx` (`practitioner_role_id` ASC)  ,
  INDEX `fk_new_patient_profile_vhdir_location1_idx` (`location_id` ASC)  ,
  CONSTRAINT `fk_new_patient_profile_vhdir_practitioner_role1`
    FOREIGN KEY (`practitioner_role_id`)
    REFERENCES `spd_medium`.`vhdir_practitioner_role` (`practitioner_role_id`),
  CONSTRAINT `fk_new_patient_profile_vhdir_location1`
    FOREIGN KEY (`location_id`)
    REFERENCES `spd_medium`.`vhdir_location` (`location_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'An extension to provide information about the types of new patients a practitioner (through a role) or location accepts.\nFor example, a pediatric provider may only accept children up to a certain age.\n\nFormal Views of Profile Content\n\nDescription of Profiles, Differentials, and Snapshots.\n\nThe official URL for this profile is: http://hl7.org/fhir/uv/vhdir/StructureDefinition/newpatientprofile \n\nHas mandatory new patient profile string, url\n\nReferenced by practitioner role.';


-- -----------------------------------------------------
-- Table `spd_medium`.`new_patients`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `spd_medium`.`new_patients` ;

CREATE TABLE IF NOT EXISTS `spd_medium`.`new_patients` (
  `new_patients_id` INT(11) NOT NULL AUTO_INCREMENT,
  `accepting_patient` TINYINT(4) NOT NULL DEFAULT '1' COMMENT 'Accepting patients boolean',
  `url` VARCHAR(256) NOT NULL DEFAULT 'http://hl7.org/fhir/uv/vhdir/StructureDefinition/newpatients',
  `network_id` INT(11) NULL DEFAULT NULL,
  `practitioner_role_id` INT(11) NULL DEFAULT NULL,
  `healthcare_service_id` INT(11) NULL DEFAULT NULL COMMENT 'Whether the services is accepting new patients\\\\nURL: http://hl7.org/fhir/uv/vhdir/StructureDefinition/newpatients',
  `location_id` INT(11) NULL,
  PRIMARY KEY (`new_patients_id`),
  INDEX `fk_new_patients_vhdir_network_idx` (`network_id` ASC)  ,
  INDEX `fk_new_patients_vhdir_practitioner_role1_idx` (`practitioner_role_id` ASC)  ,
  INDEX `fk_new_patients_vhdir_healthcare_service1_idx` (`healthcare_service_id` ASC)  ,
  INDEX `fk_new_patients_vhdir_location1_idx` (`location_id` ASC)  ,
  CONSTRAINT `fk_new_patients_vhdir_healthcare_service1`
    FOREIGN KEY (`healthcare_service_id`)
    REFERENCES `spd_medium`.`vhdir_healthcare_service` (`healthcare_service_id`),
  CONSTRAINT `fk_new_patients_vhdir_network`
    FOREIGN KEY (`network_id`)
    REFERENCES `spd_medium`.`vhdir_network` (`network_id`),
  CONSTRAINT `fk_new_patients_vhdir_practitioner_role1`
    FOREIGN KEY (`practitioner_role_id`)
    REFERENCES `spd_medium`.`vhdir_practitioner_role` (`practitioner_role_id`),
  CONSTRAINT `fk_new_patients_vhdir_location1`
    FOREIGN KEY (`location_id`)
    REFERENCES `spd_medium`.`vhdir_location` (`location_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'An extension to indicate whether a practitioner (through a role), service, or location is accepting new patients.\n\nConsists of:\nnewPatients.acceptingPatients - a boolean indicating whether the entity is accepting new patients\n\nnewPatients.network - a reference to a healthcare provider insurance network for which the entity is/isn’t accepting new patients\n\nFormal Views of Profile Content\n\nDescription of Profiles, Differentials, and Snapshots. \n\nThe official URL for this profile is: http://hl7.org/fhir/uv/vhdir/StructureDefinition/newpatients \n\nHas mandatory accepting patients boolean, url\n\nHas optional network reference';


-- -----------------------------------------------------
-- Table `spd_medium`.`not_available_time`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `spd_medium`.`not_available_time` ;

CREATE TABLE IF NOT EXISTS `spd_medium`.`not_available_time` (
  `unavailable_time_id` INT(11) NOT NULL AUTO_INCREMENT,
  `description` VARCHAR(45) NOT NULL COMMENT 'Reason for unavailability during this time period',
  `during_start_time` TIME NULL DEFAULT NULL,
  `during_end_time` TIME NULL DEFAULT NULL,
  `practitioner_role_id` INT(11) NULL DEFAULT NULL COMMENT 'Not available during this time due to provided reason',
  `healthcare_service_id` INT(11) NULL DEFAULT NULL COMMENT 'Not available during this time due to provided reason',
  INDEX `fk_unavailable_time_practitioner_role1_idx` (`practitioner_role_id` ASC)  ,
  INDEX `fk_unavailable_time_healthcare_service1_idx` (`healthcare_service_id` ASC)  ,
  PRIMARY KEY (`unavailable_time_id`),
  CONSTRAINT `fk_unavailable_time_healthcare_service1`
    FOREIGN KEY (`healthcare_service_id`)
    REFERENCES `spd_medium`.`vhdir_healthcare_service` (`healthcare_service_id`),
  CONSTRAINT `fk_unavailable_time_practitioner_role1`
    FOREIGN KEY (`practitioner_role_id`)
    REFERENCES `spd_medium`.`vhdir_practitioner_role` (`practitioner_role_id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'An entityr is not available or performing a role during this period of time due to the provided reason.\n\nDefined on this element\nele-1: All FHIR elements must have a @value or children (: hasValue() or (children().count() > id.count()))\n\nHas required description string and optional period\n\nReferenced by practiioner role and healthcare service.';


-- -----------------------------------------------------
-- Table `spd_medium`.`note`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `spd_medium`.`note` ;

CREATE TABLE IF NOT EXISTS `spd_medium`.`note` (
  `note_id` INT(11) NOT NULL AUTO_INCREMENT,
  `time` DATETIME NULL DEFAULT NULL,
  `text` VARCHAR(45) NOT NULL COMMENT 'The annotation - text content (as markdown)',
  `author_reference` VARCHAR(45) NULL COMMENT 'Used if there is no author(Practitioner) reference id, or if additional author information is required/useful.',
  `practitioner_id` INT(11) NULL DEFAULT NULL COMMENT 'Reference(VhDir Practitioner), string',
  `careteam_note_id` INT(11) NULL DEFAULT NULL COMMENT 'Comments made about the CareTeam',
  PRIMARY KEY (`note_id`),
  INDEX `fk_note_practitioner1_idx` (`practitioner_id` ASC)  ,
  INDEX `fk_note_careteam1_idx` (`careteam_note_id` ASC)  ,
  CONSTRAINT `fk_note_careteam1`
    FOREIGN KEY (`careteam_note_id`)
    REFERENCES `spd_medium`.`vhdir_careteam` (`careteam_id`),
  CONSTRAINT `fk_note_practitioner1`
    FOREIGN KEY (`practitioner_id`)
    REFERENCES `spd_medium`.`vhdir_practitioner` (`practitioner_id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Comments made about the referenced CareTeam.\n\nHas 0 to many authors (Practitioner), optional time, and mandatory text.';


-- -----------------------------------------------------
-- Table `spd_medium`.`organization_alias`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `spd_medium`.`organization_alias` ;

CREATE TABLE IF NOT EXISTS `spd_medium`.`organization_alias` (
  `organization_alias_id` INT(11) NOT NULL AUTO_INCREMENT,
  `period_start` DATETIME NULL DEFAULT NULL,
  `period_end` DATETIME NULL DEFAULT NULL,
  `value` VARCHAR(45) NULL DEFAULT NULL COMMENT 'Primitive value for string\\\\\\\\nMax Length: 1048576',
  `alias_type_cc_id` INT(11) NULL DEFAULT NULL,
  `organization_id` INT(11) NULL DEFAULT NULL COMMENT 'A list of alternate names that the organization is known as, or was known as in the past',
  PRIMARY KEY (`organization_alias_id`),
  INDEX `fk_organization_alias_codeable_concept1_idx` (`alias_type_cc_id` ASC)  ,
  INDEX `fk_organization_alias_organization1_idx` (`organization_id` ASC)  ,
  CONSTRAINT `fk_organization_alias_codeable_concept1`
    FOREIGN KEY (`alias_type_cc_id`)
    REFERENCES `spd_medium`.`fhir_codeable_concept` (`codeable_concept_id`),
  CONSTRAINT `fk_organization_alias_organization1`
    FOREIGN KEY (`organization_id`)
    REFERENCES `spd_medium`.`vhdir_organization` (`organization_id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'A list of alternate names that the organization is known as, or was known as in the past\n\nOver time locations and organizations go through many changes and can be known by different names.\n\nFor searching knowing previous names that the organization was known by can be very useful.\n\nComments\nThere are no dates associated with the alias/historic names, as this is not intended to track when names were used, but to assist in searching so that older names can still result in identifying the organization.\n\nHas optional alias type codeable concept, period, and value.\n\nRefernced by Organization';


-- -----------------------------------------------------
-- Table `spd_medium`.`organization_contact`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `spd_medium`.`organization_contact` ;

CREATE TABLE IF NOT EXISTS `spd_medium`.`organization_contact` (
  `organization_contact_id` INT(11) NOT NULL AUTO_INCREMENT,
  `purpose_id` INT(11) NULL DEFAULT NULL COMMENT 'Indicates a purpose for which the contact can be reached.\nThe purpose for which you would contact a contact party.\nThe codes SHALL be taken from ContactEntityType; other codes may be used where these codes are not suitable',
  `name_id` INT(11) NULL DEFAULT NULL,
  `address_id` INT(11) NULL DEFAULT NULL,
  `organization_id` INT(11) NULL COMMENT 'ontact for the organization for a certain purpose',
  PRIMARY KEY (`organization_contact_id`),
  INDEX `fk_organization_contact_codeable_concept1_idx` (`purpose_id` ASC)  ,
  INDEX `fk_organization_contact_name1_idx` (`name_id` ASC)  ,
  INDEX `fk_organization_contact_address1_idx` (`address_id` ASC)  ,
  INDEX `fk_organization_contact_vhdir_organization1_idx` (`organization_id` ASC)  ,
  CONSTRAINT `fk_organization_contact_address1`
    FOREIGN KEY (`address_id`)
    REFERENCES `spd_medium`.`address` (`address_id`),
  CONSTRAINT `fk_organization_contact_codeable_concept1`
    FOREIGN KEY (`purpose_id`)
    REFERENCES `spd_medium`.`fhir_codeable_concept` (`codeable_concept_id`),
  CONSTRAINT `fk_organization_contact_name1`
    FOREIGN KEY (`name_id`)
    REFERENCES `spd_medium`.`name` (`name_id`),
  CONSTRAINT `fk_organization_contact_vhdir_organization1`
    FOREIGN KEY (`organization_id`)
    REFERENCES `spd_medium`.`vhdir_organization` (`organization_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Contact for the organization for a certain purpose\n\nNeed to keep track of assigned contact points within bigger organization.\n\nComments\nWhere multiple contacts for the same purpose are provided there is a standard extension that can be used to determine which one is the preferred contact to use.\n\nInvariants:\nDefined on this element\nele-1: All FHIR elements must have a @value or children (: hasValue() or (children().count() > id.count()))\n\nHas optional purpose codeable concept, address, and name.\n\nHas 0 to many telecoms.\n\nReferenced by Organization.';


-- -----------------------------------------------------
-- Table `spd_medium`.`organization_taxonomy`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `spd_medium`.`organization_taxonomy` ;

CREATE TABLE IF NOT EXISTS `spd_medium`.`organization_taxonomy` (
  `organization_taxonomy_id` INT NOT NULL AUTO_INCREMENT,
  `code` VARCHAR(255) NOT NULL DEFAULT 'organization',
  `value` VARCHAR(255) NOT NULL,
  `organization_id` INT(11) NOT NULL,
  PRIMARY KEY (`organization_taxonomy_id`),
  INDEX `fk_organization_taxonomy_vhdir_organization1_idx` (`organization_id` ASC)  ,
  CONSTRAINT `fk_organization_taxonomy_vhdir_organization1`
    FOREIGN KEY (`organization_id`)
    REFERENCES `spd_medium`.`vhdir_organization` (`organization_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `spd_medium`.`participant`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `spd_medium`.`participant` ;

CREATE TABLE IF NOT EXISTS `spd_medium`.`participant` (
  `participant_id` INT(11) NOT NULL AUTO_INCREMENT,
  `period_start` DATETIME NULL DEFAULT NULL,
  `period_end` DATETIME NULL DEFAULT NULL,
  `member` INT(11) NULL COMMENT 'Who is involved\n	Reference(VhDir Care Team | VhDir Practitioner Role | VhDir Organization)	',
  PRIMARY KEY (`participant_id`),
  INDEX `fk_participant_resource_reference1_idx` (`member` ASC)  ,
  CONSTRAINT `fk_participant_resource_reference1`
    FOREIGN KEY (`member`)
    REFERENCES `spd_medium`.`resource_reference` (`resource_reference_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Members of a careteam.\n\nMember can be one of careteam, practitioner or organization, but only one.';


-- -----------------------------------------------------
-- Table `spd_medium`.`plan`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `spd_medium`.`plan` ;

CREATE TABLE IF NOT EXISTS `spd_medium`.`plan` (
  `plan_id` INT(11) NOT NULL AUTO_INCREMENT,
  `type_cc_id` INT(11) NULL COMMENT 'Binding: VhDir Plan Type (example)',
  PRIMARY KEY (`plan_id`),
  INDEX `fk_plan_fhir_codeable_concept1_idx` (`type_cc_id` ASC)  ,
  CONSTRAINT `fk_plan_fhir_codeable_concept1`
    FOREIGN KEY (`type_cc_id`)
    REFERENCES `spd_medium`.`fhir_codeable_concept` (`codeable_concept_id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Hs an optional type codeable concept.\nHas 0 to many identifier references\n 0 to many coverageArea (Location) references, 0 to many network references, 0 to many general cost references, o to many specific cost references';


-- -----------------------------------------------------
-- Table `spd_medium`.`plan_benefit`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `spd_medium`.`plan_benefit` ;

CREATE TABLE IF NOT EXISTS `spd_medium`.`plan_benefit` (
  `benefit_id` INT(11) NOT NULL AUTO_INCREMENT,
  `type_cc_id` INT(11) NOT NULL COMMENT 'Binding: VhDir Benefit Type (example)',
  `requirement` VARCHAR(45) NULL DEFAULT NULL,
  `coverage_id` INT(11) NULL DEFAULT NULL,
  PRIMARY KEY (`benefit_id`),
  INDEX `fk_benefit_fhir_codeable_concept1_idx` (`type_cc_id` ASC)  ,
  INDEX `fk_benefit_coverage1_idx` (`coverage_id` ASC)  ,
  CONSTRAINT `fk_benefit_coverage1`
    FOREIGN KEY (`coverage_id`)
    REFERENCES `spd_medium`.`coverage` (`coverage_id`),
  CONSTRAINT `fk_benefit_fhir_codeable_concept1`
    FOREIGN KEY (`type_cc_id`)
    REFERENCES `spd_medium`.`fhir_codeable_concept` (`codeable_concept_id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Has 0 to many limit references';


-- -----------------------------------------------------
-- Table `spd_medium`.`policy`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `spd_medium`.`policy` ;

CREATE TABLE IF NOT EXISTS `spd_medium`.`policy` (
  `policy_id` INT(11) NOT NULL AUTO_INCREMENT,
  `uri` VARCHAR(45) NULL DEFAULT NULL COMMENT 'Specific policy covered by this restriction',
  `restriction_id` INT(11) NULL DEFAULT NULL COMMENT 'Policies covered by this consent',
  PRIMARY KEY (`policy_id`),
  INDEX `fk_policy_vhdir_restriction1_idx` (`restriction_id` ASC)  ,
  CONSTRAINT `fk_policy_vhdir_restriction1`
    FOREIGN KEY (`restriction_id`)
    REFERENCES `spd_medium`.`vhdir_restriction` (`restriction_id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Policies covered by this consent,\ndefines access rights for restricted content.\n\nThe references to the policies that are included in this consent scope. Policies may be organizational, but are often defined jurisdictionally, or in law.\n\n All FHIR elements must have a @value or children (: hasValue() or (children().count() > id.count()))\n\nHas 0 to many policy uri\'s. \n\nReferenced by restriction\n\n';


-- -----------------------------------------------------
-- Table `spd_medium`.`primary_source`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `spd_medium`.`primary_source` ;

CREATE TABLE IF NOT EXISTS `spd_medium`.`primary_source` (
  `primary_source_id` INT(11) NOT NULL AUTO_INCREMENT,
  `validation_status_cc_id` INT(11) NULL DEFAULT NULL COMMENT 'tatus of the validation of the target against the primary source (successful; failed; unknown).\n\nStatus of the validation of the target against the primary source.\nThe codes SHOULD be taken from validation-status',
  `validation_date` DATETIME NULL COMMENT 'When the target was validated against the primary source.',
  `can_push_updates_cc_id` INT(11) NULL DEFAULT NULL COMMENT 'Ability of the primary source to push updates/alerts (yes; no; undetermined).\n\nAbility of the primary source to push updates/alerts.\nThe codes SHOULD be taken from can-push-updates',
  `who_resource_reference_id` INT(11) NULL COMMENT 'Reference to the primary source.\nReference(VhDir Organization | VhDir Practitioner | VhDir Practitioner Role)\n',
  PRIMARY KEY (`primary_source_id`),
  INDEX `fk_primary_source_fhir_codeable_concept1_idx` (`validation_status_cc_id` ASC)  ,
  INDEX `fk_primary_source_fhir_codeable_concept2_idx` (`can_push_updates_cc_id` ASC)  ,
  INDEX `fk_primary_source_resource_reference1_idx` (`who_resource_reference_id` ASC)  ,
  CONSTRAINT `fk_primary_source_fhir_codeable_concept1`
    FOREIGN KEY (`validation_status_cc_id`)
    REFERENCES `spd_medium`.`fhir_codeable_concept` (`codeable_concept_id`),
  CONSTRAINT `fk_primary_source_fhir_codeable_concept2`
    FOREIGN KEY (`can_push_updates_cc_id`)
    REFERENCES `spd_medium`.`fhir_codeable_concept` (`codeable_concept_id`),
  CONSTRAINT `fk_primary_source_resource_reference1`
    FOREIGN KEY (`who_resource_reference_id`)
    REFERENCES `spd_medium`.`resource_reference` (`resource_reference_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'verificationResult.primarySource provides information about the primary source(s) the target was validated against\nwho identifies the primary source, and type indicates what the primary source is\ncommunicationMethod indicates how an entity can communicate with the primary source\nvalidationStatus, and validationDate describe the status of the validation of the target against the primary source\ncanPushUpdates and pushTypeAvailable indicate whether a primary source can push updates or alerts (e.g. alerting the validated healthcare directory if a license board suspends a practitioner’s license)\n\nField \'who\' can reference an origanization, practitioner, or practictioner role, but only one.\n\nHas at least one type codeable concept\n\nHas optional who resource reference, validation status codeable concept, validation datetime, canPushUpdates codeable concept, \n\nHas 0 to many communication method codeable concepts, pushTyeAvailable codeable concepts.\n\nReferenced by validation';


-- -----------------------------------------------------
-- Table `spd_medium`.`provision`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `spd_medium`.`provision` ;

CREATE TABLE IF NOT EXISTS `spd_medium`.`provision` (
  `provision_id` INT(11) NOT NULL AUTO_INCREMENT,
  `type` VARCHAR(45) NULL DEFAULT 'permit' COMMENT 'deny | permit\\\\nBinding: ConsentProvisionType (required)\\\\nFixed Value: permit',
  `security_label` VARCHAR(45) NULL DEFAULT NULL COMMENT 'A security label, comprised of 0..* security label fields (Privacy tags), which define which resources are controlled by this exception.\n\nIf the consent specifies a security label of \"R\" then it applies to all resources that are labeled \"R\" or lower. E.g. for Confidentiality, it\'s a high water mark. For other kinds of security labels, subsumption logic applies. When the purpose of use tag is on the data, access request purpose of use shall not conflict.',
  `purpose` VARCHAR(45) NULL DEFAULT NULL COMMENT 'Name assigned to the restriction condition\n\nWhen the purpose of use tag is on the data, access request purpose of use shall not conflict.',
  `action_cc_id` INT(11) NULL DEFAULT NULL COMMENT 'Describes how the reference is related to the restriction (contributes to; reason for; existance of; specific value)\n\nNote that this is the direct action (not the grounds for the action covered in the purpose element). At present, the only action in the understood and tested scope of this resource is \'read\'.\n\nMeaning if Missing - all actions',
  PRIMARY KEY (`provision_id`),
  INDEX `fk_provision_fhir_codeable_concept1_idx` (`action_cc_id` ASC)  ,
  CONSTRAINT `fk_provision_fhir_codeable_concept1`
    FOREIGN KEY (`action_cc_id`)
    REFERENCES `spd_medium`.`fhir_codeable_concept` (`codeable_concept_id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'An exception to the base policy of this consent. An exception can be an addition or removal of access permissions.\n\nAll FHIR elements must have a @value or children (: hasValue() or (children().count() > id.count()))\n\nHas at least one actor \n\nHas optional type code, action codeable concept.\n\nHas 0 to many securityLabel codes, purpose codes.';


-- -----------------------------------------------------
-- Table `spd_medium`.`qualification`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `spd_medium`.`qualification` ;

CREATE TABLE IF NOT EXISTS `spd_medium`.`qualification` (
  `qualification_id` INT(11) NOT NULL AUTO_INCREMENT,
  `code_cc_id` INT(11) NOT NULL,
  `issuing_organization_id` INT(11) NOT NULL,
  `status` VARCHAR(45) NULL COMMENT 'Previous status\nBinding: VhDir Qualification Status (example)',
  `period_start` DATETIME NULL,
  `period_end` DATETIME NULL,
  `coding` VARCHAR(45) NOT NULL COMMENT 'Status\nBinding: VhDir Qualification Status (example)',
  `url` VARCHAR(256) NOT NULL DEFAULT 'http://hl7.org/fhir/uv/vhdir/StructureDefinition/qualification',
  `practitioner_role_id` INT(11) NULL COMMENT 'Practitioner\'s qualifications unique to this role\\\\\\\\nURL: http://hl7.org/fhir/uv/vhdir/StructureDefinition/qualification',
  `practitioner_id` INT(11) NULL,
  PRIMARY KEY (`qualification_id`),
  INDEX `fk_qualification_codeable_concept1_idx` (`code_cc_id` ASC)  ,
  INDEX `fk_qualification_organization2_idx` (`issuing_organization_id` ASC)  ,
  INDEX `fk_qualification_practitioner_role1_idx` (`practitioner_role_id` ASC)  ,
  INDEX `fk_qualification_vhdir_practitioner1_idx` (`practitioner_id` ASC)  ,
  CONSTRAINT `fk_qualification_codeable_concept1`
    FOREIGN KEY (`code_cc_id`)
    REFERENCES `spd_medium`.`fhir_codeable_concept` (`codeable_concept_id`),
  CONSTRAINT `fk_qualification_organization2`
    FOREIGN KEY (`issuing_organization_id`)
    REFERENCES `spd_medium`.`vhdir_organization` (`organization_id`),
  CONSTRAINT `fk_qualification_practitioner_role1`
    FOREIGN KEY (`practitioner_role_id`)
    REFERENCES `spd_medium`.`vhdir_practitioner_role` (`practitioner_role_id`),
  CONSTRAINT `fk_qualification_vhdir_practitioner1`
    FOREIGN KEY (`practitioner_id`)
    REFERENCES `spd_medium`.`vhdir_practitioner` (`practitioner_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Certification, licenses, or training pertaining to the provision of care\n\nAn extension to add qualifications for an organization (e.g. accreditation) or practitionerRole (e.g. registered to prescribe controlled substances). The extension includes:\n\nqualification.identifier provides an identifier for the qualification\n\nqualification.code indicates the type of qualification\n\nqualificaton.issuer includes a reference to the organization that issued the qualification\n\nqualification.status describes the current status of the qualification (i.e. active, inactive, issued in error, revoked, pending, unknown)\n\nqualification.period indicates a period of time during which the current status applies\n\nqualification.whereValid indicates where the qualification is valid. Users may select any number of specific locations, classes of locations, or combination thereof\n\nqualification.history presents a series of historical statuses for the qualification and the period of time associated with each status\n\nMandatory value codeable concept,\nOrganization refernce (issuer), and perido.\n\n0 to many where_valid Locations, and where_valid codeable concepts.\n\nReferenced by practitioner and practitioner_role.';


-- -----------------------------------------------------
-- Table `spd_medium`.`qualification_history`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `spd_medium`.`qualification_history` ;

CREATE TABLE IF NOT EXISTS `spd_medium`.`qualification_history` (
  `qualification_history_id` INT NOT NULL AUTO_INCREMENT,
  `coding` VARCHAR(45) NULL COMMENT 'Previous status\nBinding: VhDir Qualification Status (example)',
  `period_start` DATETIME NOT NULL,
  `period_end` DATETIME NOT NULL,
  `url` VARCHAR(256) NOT NULL DEFAULT 'http://hl7.org/fhir/uv/vhdir/StructureDefinition/qualification',
  `qualification_id` INT(11) NOT NULL COMMENT 'The qualification to which this history item belongs',
  INDEX `fk_qualification_history_qualification1_idx` (`qualification_id` ASC)  ,
  PRIMARY KEY (`qualification_history_id`),
  CONSTRAINT `fk_qualification_history_qualification1`
    FOREIGN KEY (`qualification_id`)
    REFERENCES `spd_medium`.`qualification` (`qualification_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
COMMENT = 'Qualifcation history - previous periods when a qualification was valid.\n\nMandatory period\n\nReferenced by qualification';


-- -----------------------------------------------------
-- Table `spd_medium`.`resource_reference`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `spd_medium`.`resource_reference` ;

CREATE TABLE IF NOT EXISTS `spd_medium`.`resource_reference` (
  `resource_reference_id` INT(11) NOT NULL AUTO_INCREMENT,
  `reference` VARCHAR(512) NULL DEFAULT NULL COMMENT 'Literal reference, Relative, internal or absolute URL',
  `type` VARCHAR(45) NULL DEFAULT NULL COMMENT 'Type the reference refers to (e.g. \"Patient\")\nResourceType (Extensible)',
  `identifier` VARCHAR(512) NULL DEFAULT NULL COMMENT 'Logical reference, when literal reference is not known',
  `display` VARCHAR(1024) NULL DEFAULT NULL COMMENT 'Text alternative for the resource',
  `validation_target_id` INT(11) NULL DEFAULT NULL,
  PRIMARY KEY (`resource_reference_id`),
  INDEX `fk_resource_reference_vhdir_validation1_idx` (`validation_target_id` ASC)  ,
  CONSTRAINT `fk_resource_reference_vhdir_validation1`
    FOREIGN KEY (`validation_target_id`)
    REFERENCES `spd_medium`.`vhdir_validation` (`validation_id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Many of the defined elements in a resource are references to other resources. Using these references, the resources combine to build a web of information about healthcare. \nReferences are always defined and represented in one direction - from one resource (source) to another (target). The corresponding reverse relationship from the target to the source exists in a logical sense, but is not typically represented explicitly in the target resource. For external references, navigating these reverse relationships requires some external infrastructure to track the relationship between resources (the REST API provides one such infrastructure by providing the ability to search the reverse relationship by naming search parameters for the references and by providing support for reverse includes). \nBecause resources are processed independently, relationships are not considered to be transitive. For example, if a Procedure resource references a Patient as its subject, and has a Procedure resource as its reason, there is no automatic rule or implication that the condition has the same patient for its subject. Instead, the subject of the condition must be established directly in the Condition resource itself. Another way to state this is that the context of the subject is not \"inherited\", nor does it \"conduct\" along the relationship to condition. The only exception to this is the case of contained resources (see below). Note that in practice, the relationships need to describe a logical and coherent record, and in the case of the Condition and Procedure described here, they would usually be required to have the same patient for their subjects. Profiles and/or implementation guides may make rules about this (also see GraphDefinition). \nThis specification describes the use of references to other resources that have the same FHIR version as the source of the reference. Expected behavior for references across FHIR versions is presently undefined. \nReferences are made to resource based on their identity; there are several different' /* comment truncated */ /*identities to refer to. 
Resources contain two types of references to other resources: 
Resource references - general references between resources
Canonical references - references to resources by their canonical URL (see below)
For canonical references, see below. The general references are handled by the Reference type. which contains at least one of a reference (literal reference), an identifier (logical reference), and a display (text description of target). In addition, it may contain a target type. 

Has optional reference string, resource type uri, Identifier, display string*/;


-- -----------------------------------------------------
-- Table `spd_medium`.`specific_cost`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `spd_medium`.`specific_cost` ;

CREATE TABLE IF NOT EXISTS `spd_medium`.`specific_cost` (
  `specific_cost_id` INT(11) NOT NULL AUTO_INCREMENT COMMENT 'Binding: VhDir Insurance Plan Cost Category (example)',
  `category_cc_id` INT(11) NOT NULL,
  `insurance_plan_id` INT(11) NULL DEFAULT NULL,
  PRIMARY KEY (`specific_cost_id`),
  INDEX `fk_specific_cost_fhir_codeable_concept1_idx` (`category_cc_id` ASC)  ,
  INDEX `fk_specific_cost_vhdir_insurance_plan1_idx` (`insurance_plan_id` ASC)  ,
  CONSTRAINT `fk_specific_cost_fhir_codeable_concept1`
    FOREIGN KEY (`category_cc_id`)
    REFERENCES `spd_medium`.`fhir_codeable_concept` (`codeable_concept_id`),
  CONSTRAINT `fk_specific_cost_vhdir_insurance_plan1`
    FOREIGN KEY (`insurance_plan_id`)
    REFERENCES `spd_medium`.`vhdir_insurance_plan` (`insurance_plan_id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Part of a plan.\nHas mandatory category codeable concept, and, 0 to many individual cost benefits';


-- -----------------------------------------------------
-- Table `spd_medium`.`telecom`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `spd_medium`.`telecom` ;

CREATE TABLE IF NOT EXISTS `spd_medium`.`telecom` (
  `telecom_id` INT(11) NOT NULL AUTO_INCREMENT,
  `system` VARCHAR(7) NOT NULL DEFAULT 'phone' COMMENT 'phone | fax | email | pager | url | sms | other\nBinding: ContactPointSystem (required)',
  `value` VARCHAR(20) NOT NULL COMMENT 'The actual contact point details',
  `use` VARCHAR(7) NULL DEFAULT NULL COMMENT 'home | work | temp | old | mobile - purpose of this contact point\nBinding: ContactPointUse (required)',
  `rank` INT NULL DEFAULT NULL COMMENT 'Specify preferred order of use (1 = highest)',
  `period_start` DATETIME NULL DEFAULT NULL COMMENT 'Time period when the contact point was/is in use',
  `period_end` DATETIME NULL DEFAULT NULL,
  `practitioner_id` INT(11) NULL DEFAULT NULL COMMENT 'A contact detail for the practitioner (that apply to all roles)',
  `organization_contact_id` INT(11) NULL DEFAULT NULL,
  `careteam_id` INT(11) NULL DEFAULT NULL COMMENT 'A contact detail for the care team (that applies to all members)',
  `healthcare_service_id` INT(11) NULL DEFAULT NULL COMMENT 'Contacts related to the healthcare service',
  `location_id` INT(11) NULL DEFAULT NULL COMMENT 'Contact details of the location',
  `contact_id` INT(11) NULL DEFAULT NULL,
  `contactpoint_intermediary` INT(11) NULL COMMENT 'Reference(VhDir Practitioner Role | VhDir Organization | VhDir Organization Affiliation | VhDir Location)	\nviaintermediary\nURL: http://hl7.org/fhir/uv/vhdir/StructureDefinition/contactpoint-viaintermediary',
  `organization_id` INT(11) NULL COMMENT 'A contact detail for the organization',
  PRIMARY KEY (`telecom_id`),
  INDEX `telecom_practitioner_id_idx` (`practitioner_id` ASC)  ,
  INDEX `fk_telecom_organization_contact1_idx` (`organization_contact_id` ASC)  ,
  INDEX `fk_telecom_careteam1_idx` (`careteam_id` ASC)  ,
  INDEX `fk_telecom_healthcare_service1_idx` (`healthcare_service_id` ASC)  ,
  INDEX `fk_telecom_location1_idx` (`location_id` ASC)  ,
  INDEX `fk_telecom_contact1_idx` (`contact_id` ASC)  ,
  INDEX `fk_telecom_resource_reference1_idx` (`contactpoint_intermediary` ASC)  ,
  INDEX `fk_telecom_vhdir_organization1_idx` (`organization_id` ASC)  ,
  CONSTRAINT `fk_telecom_careteam1`
    FOREIGN KEY (`careteam_id`)
    REFERENCES `spd_medium`.`vhdir_careteam` (`careteam_id`),
  CONSTRAINT `fk_telecom_contact1`
    FOREIGN KEY (`contact_id`)
    REFERENCES `spd_medium`.`contact` (`contact_id`),
  CONSTRAINT `fk_telecom_healthcare_service1`
    FOREIGN KEY (`healthcare_service_id`)
    REFERENCES `spd_medium`.`vhdir_healthcare_service` (`healthcare_service_id`),
  CONSTRAINT `fk_telecom_location1`
    FOREIGN KEY (`location_id`)
    REFERENCES `spd_medium`.`vhdir_location` (`location_id`),
  CONSTRAINT `fk_telecom_organization_contact1`
    FOREIGN KEY (`organization_contact_id`)
    REFERENCES `spd_medium`.`organization_contact` (`organization_contact_id`),
  CONSTRAINT `telecom_practitioner_id`
    FOREIGN KEY (`practitioner_id`)
    REFERENCES `spd_medium`.`vhdir_practitioner` (`practitioner_id`)
    ON DELETE CASCADE,
  CONSTRAINT `fk_telecom_resource_reference1`
    FOREIGN KEY (`contactpoint_intermediary`)
    REFERENCES `spd_medium`.`resource_reference` (`resource_reference_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_telecom_vhdir_organization1`
    FOREIGN KEY (`organization_id`)
    REFERENCES `spd_medium`.`vhdir_organization` (`organization_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = latin1
COMMENT = 'A contact detail for an entity, e.g. a telephone number or an email address.\n\nEntity  may have multiple ways to be contacted with different uses or applicable periods. May need to have options for contacting the person urgently and to help with identification. These typically will have home numbers, or mobile numbers that are not role specific.\n\nHas mandatory system code, value string.\n\nHas optional viaIntermediary, 0 to many available times.\n\nHas optional use code, rank and period.\n\nReferenced by oganization, organization affiliation, practitioner, practitioner role, careteam, healthcare service, location, and contact resources.';


-- -----------------------------------------------------
-- Table `spd_medium`.`trust_framework`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `spd_medium`.`trust_framework` ;

CREATE TABLE IF NOT EXISTS `spd_medium`.`trust_framework` (
  `trust_framework_id` INT(11) NOT NULL AUTO_INCREMENT,
  `digital_certificate_id` INT(11) NULL DEFAULT NULL,
  `value_cc_id` INT(11) NULL DEFAULT NULL COMMENT 'Trust framework\nBinding: VhDir Digital Certificate Trust Framework Value Set (example)',
  `url` VARCHAR(256) NULL,
  PRIMARY KEY (`trust_framework_id`),
  INDEX `fk_trust_framework_digital_certificate1_idx` (`digital_certificate_id` ASC)  ,
  INDEX `fk_trust_framework_codeable_concept1_idx` (`value_cc_id` ASC)  ,
  CONSTRAINT `fk_trust_framework_codeable_concept1`
    FOREIGN KEY (`value_cc_id`)
    REFERENCES `spd_medium`.`fhir_codeable_concept` (`codeable_concept_id`),
  CONSTRAINT `fk_trust_framework_digital_certificate1`
    FOREIGN KEY (`digital_certificate_id`)
    REFERENCES `spd_medium`.`digital_certificate` (`digital_certificate_id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Trust framework\nBinding: VhDir Digital Certificate Trust Framework Value Set (example)\n\n\"http://hl7.org/fhir/uv/vhdir/StructureDefinition/digitalcertificate\"\n\nHas mandatory url and value codeable concept\n\nReferenced by digital certificate';


-- -----------------------------------------------------
-- Table `spd_medium`.`use_case`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `spd_medium`.`use_case` ;

CREATE TABLE IF NOT EXISTS `spd_medium`.`use_case` (
  `use_case_id` INT(11) NOT NULL AUTO_INCREMENT,
  `type_cc_id` INT(11) NOT NULL COMMENT 'Type\nBinding: VhDir Use Case Type (example)',
  `standard` VARCHAR(45) NULL DEFAULT 'uri' COMMENT 'Uri pointing to the standard for this use case.',
  `url` VARCHAR(256) NOT NULL DEFAULT 'http://hl7.org/fhir/uv/vhdir/StructureDefinition/endpoint-usecase',
  `endpoint_id` INT(11) NULL DEFAULT NULL,
  PRIMARY KEY (`use_case_id`),
  INDEX `fk_use_case_vhdir_endpoint1_idx` (`endpoint_id` ASC)  ,
  CONSTRAINT `fk_use_case_fhir_codeable_concept1`
    FOREIGN KEY (`type_cc_id`)
    REFERENCES `spd_medium`.`fhir_codeable_concept` (`codeable_concept_id`),
  CONSTRAINT `fk_use_case_vhdir_endpoint1`
    FOREIGN KEY (`endpoint_id`)
    REFERENCES `spd_medium`.`vhdir_endpoint` (`endpoint_id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'An extension to indicate the specific use cases/services supported by an endpoint, e.g. “I support this implementation guide at this endpoint\n\nConsists of:\n- useCase.type - an indication of the type of services supported by the endpoint\n\n- useCase.standard - a URI to a published standard describing the services supported by the endpoint (e.g. an HL7 implementation guide)\n\n-Formal Views of Profile Content\n\n-Description of Profiles, Differentials, and Snapshots. \n\nThe official URL for this profile is: http://hl7.org/fhir/uv/vhdir/StructureDefinition/endpoint-usecase \n\nHas mandatory type codeable concpept, url\n\nHas optional standard uri.\n\nReferenced by endpoint.';


-- -----------------------------------------------------
-- Table `spd_medium`.`validator`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `spd_medium`.`validator` ;

CREATE TABLE IF NOT EXISTS `spd_medium`.`validator` (
  `validator_id` INT NOT NULL AUTO_INCREMENT,
  `organization_id` INT(11) NOT NULL COMMENT 'Reference to the organization validating information',
  `identity_certificate` VARCHAR(45) NULL COMMENT 'A digital identity certificate associated with the validator',
  `attestation_signature` VARCHAR(45) NULL COMMENT 'Validator signature\n\nShould be a signature reference.',
  `validation_id` INT(11) NULL COMMENT 'The validation to which this validator belongs.',
  PRIMARY KEY (`validator_id`),
  INDEX `fk_validator_vhdir_organization1_idx` (`organization_id` ASC)  ,
  INDEX `fk_validator_vhdir_validation1_idx` (`validation_id` ASC)  ,
  CONSTRAINT `fk_validator_vhdir_organization1`
    FOREIGN KEY (`organization_id`)
    REFERENCES `spd_medium`.`vhdir_organization` (`organization_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_validator_vhdir_validation1`
    FOREIGN KEY (`validation_id`)
    REFERENCES `spd_medium`.`vhdir_validation` (`validation_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
COMMENT = 'Information about the entity validating information.\nAll FHIR elements must have a @value or children (: hasValue() or (children().count() > id.count()))\n\n\nHas mandatory organization reference\n\nHas optional identity certificate and attestation signature.\n\nReferenced by validation. \n';


-- -----------------------------------------------------
-- Table `spd_medium`.`vhdir_careteam`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `spd_medium`.`vhdir_careteam` ;

CREATE TABLE IF NOT EXISTS `spd_medium`.`vhdir_careteam` (
  `careteam_id` INT(11) NOT NULL AUTO_INCREMENT,
  `meta_data_id` INT(11) NULL DEFAULT NULL,
  `status` VARCHAR(45) NOT NULL COMMENT 'Indicates the status of the care team.\nThe codes SHALL be taken from CareTeamStatus',
  `name` VARCHAR(45) NULL DEFAULT NULL COMMENT 'A label for human use intended to distinguish like teams. E.g. the \"red\" vs. \"green\" trauma teams.\n\nThe meaning/purpose of the team is conveyed in CareTeam.category. This element may also convey semantics of the team (e.g. \"Red trauma team\"), but its primary purpose is to distinguish between identical teams in a human-friendly way. (\"Team 18735\" isn\'t as friendly.).',
  `period_start` DATETIME NULL DEFAULT NULL COMMENT 'Indicates when the team did (or is intended to) come into effect and end.\nAllows tracking what team(s) are in effect at a particular time.',
  `period_end` DATETIME NULL DEFAULT NULL,
  `managing_organization_id` INT(11) NULL DEFAULT NULL COMMENT 'The organization responsible for the care team.\nAllows for multiple organizations to collaboratively manage cross-organizational, longitudinal care plan.',
  `encounter_id` INT(11) NULL DEFAULT NULL COMMENT 'The Encounter during which this CareTeam was created or to which the creation of this record is tightly associated.\nThis will typically be the encounter the event occurred within, but some activities may be initiated prior to or after the official completion of an encounter but still be tied to the context of the encounter.',
  PRIMARY KEY (`careteam_id`),
  INDEX `fk_careteam_meta_data1_idx` (`meta_data_id` ASC)  ,
  INDEX `fk_careteam_encounter1_idx` (`encounter_id` ASC)  ,
  INDEX `fk_careteam_organization1_idx` (`managing_organization_id` ASC)  ,
  CONSTRAINT `fk_careteam_encounter1`
    FOREIGN KEY (`encounter_id`)
    REFERENCES `spd_medium`.`encounter_reference` (`encounter_id`),
  CONSTRAINT `fk_careteam_meta_data1`
    FOREIGN KEY (`meta_data_id`)
    REFERENCES `spd_medium`.`fhir_meta_data` (`meta_data_id`),
  CONSTRAINT `fk_careteam_organization1`
    FOREIGN KEY (`managing_organization_id`)
    REFERENCES `spd_medium`.`vhdir_organization` (`organization_id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = latin1
COMMENT = 'A care team consists of the providers and/or organizations responsible for effectively delivering coordinated care. Care teams are conventionally associated with a specific patient. For example, a patient with diabetes may have a care team that consists of a physician, nurse, dietitian, certified diabetes educator, etc. Data about patients/caregivers, however, is out of scope for a Validated Healthcare Directory. Therefore, this care team profile constrains out elements which reference or describe patient-level data. In general, a Validated Healthcare Directory is more likely to represent administrative teams, or teams that are relevant beyond the direct clinical care of specific patients.\n\nIndividuals participating on a VHDir CareTeam SHALL be represented through an associated role. Therefore, this profile removes references to the Practitioner resource in CareTeam.participant.member. For example, Dr. Smith (an individual) does not participate on a care team. Rather, Dr. Smith in his role as a provider at Acme Hospital participates on a care team.\n\nA care team may be functionally “empty,” i.e. the roles on the care team are not filled by individuals. For example, a care team may be comprised of a primary care provider role, care coordinator role, and specialist role without indicating the individuals filling those roles (i.e., by referencing a PractitionerRole resource that does not reference a Practitioner resource). This enables entities to describe existing care teams while masking the identity of the individuals/organizations that are involved, or to represent standing care teams that are filled by individuals on an ad hoc basis in response to a condition/event.\n\nHas mandatory status code and at least one category codeable concept.\n\nHas optional single  name,encounter reference, period, managing organization.\n\nHas o to many restrictions, aliases, locations, healthcare services, endpoints, identifiers, participants, telecoms, and notes.\n\n';


-- -----------------------------------------------------
-- Table `spd_medium`.`vhdir_endpoint`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `spd_medium`.`vhdir_endpoint` ;

CREATE TABLE IF NOT EXISTS `spd_medium`.`vhdir_endpoint` (
  `endpoint_id` INT(11) NOT NULL AUTO_INCREMENT,
  `meta_data_id` INT(11) NULL DEFAULT NULL,
  `rank` INT(11) NULL DEFAULT NULL COMMENT 'Preferred order for connecting to the endpoint\\\\\\\\nURL: http://hl7.org/fhir/uv/vhdir/StructureDefinition/endpoint-rank',
  `status` VARCHAR(45) NOT NULL COMMENT 'active | suspended | error | off | entered-in-error | test\\\\\\\\nBinding: EndpointStatus (required)',
  `connectionType` VARCHAR(45) NOT NULL COMMENT 'Protocol/Profile/Standard to be used with this endpoint connection\\\\\\\\nBinding: EndpointConnectionType (extensible)',
  `name` VARCHAR(45) NULL DEFAULT NULL COMMENT 'A name that this endpoint can be identified by',
  `managing_organization_id` INT(11) NULL,
  `period_start` DATETIME NULL DEFAULT NULL,
  `period_end` DATETIME NULL DEFAULT NULL,
  `payload_mime_type` VARCHAR(45) NULL DEFAULT NULL COMMENT 'Mimetype to send. If not specified, the content could be anything (including no payload, if the connectionType defined this)',
  `address` VARCHAR(45) NOT NULL COMMENT 'A uri\\\\\\\\nThe technical base address for connecting to this endpoint',
  `header` VARCHAR(45) NULL DEFAULT NULL COMMENT 'Usage depends on the channel type, may have multiple header strings.',
  `endpoint_contact_id` INT(11) NULL DEFAULT NULL COMMENT 'Contact details for source (e.g. troubleshooting)',
  `practitioner_id` INT(11) NULL DEFAULT NULL,
  `practitioner_role_id` INT(11) NULL DEFAULT NULL COMMENT 'Technical endpoints providing access to services operated for the practitioner with this role',
  `organization_affiliation_id` INT(11) NULL DEFAULT NULL COMMENT 'Technical endpoints providing access to services operated for this role',
  `careteam_id` INT(11) NULL DEFAULT NULL COMMENT 'Endpoints for the care team\\\\\\\\nURL: http://hl7.org/fhir/uv/vhdir/StructureDefinition/endpoint-reference',
  `healthcare_service_id` INT(11) NULL DEFAULT NULL COMMENT 'Technical endpoints providing access to electronic services operated for the healthcare service',
  `location_id` INT(11) NULL DEFAULT NULL COMMENT 'Technical endpoints providing access to services operated for the location',
  `network_id` INT(11) NULL DEFAULT NULL COMMENT 'Technical endpoints providing access to services operated for the network\\\\\\\\n',
  `insurance_plan_id` INT(11) NULL DEFAULT NULL COMMENT 'Technical endpoint',
  `organization_id` INT(11) NULL,
  PRIMARY KEY (`endpoint_id`),
  INDEX `fk_endpoint_practitioner1_idx` (`practitioner_id` ASC)  ,
  INDEX `fk_endpoint_practitioner_role1_idx` (`practitioner_role_id` ASC)  ,
  INDEX `fk_endpoint_organization_affiliation1_idx` (`organization_affiliation_id` ASC)  ,
  INDEX `fk_endpoint_careteam1_idx` (`careteam_id` ASC)  ,
  INDEX `fk_endpoint_meta_data1_idx` (`meta_data_id` ASC)  ,
  INDEX `fk_endpoint_endpoint_contact1_idx` (`endpoint_contact_id` ASC)  ,
  INDEX `fk_endpoint_healthcare_service1_idx` (`healthcare_service_id` ASC)  ,
  INDEX `fk_endpoint_location1_idx` (`location_id` ASC)  ,
  INDEX `fk_endpoint_network1_idx` (`network_id` ASC)  ,
  INDEX `fk_endpoint_insurance_plan1_idx` (`insurance_plan_id` ASC)  ,
  INDEX `fk_vhdir_endpoint_vhdir_organization1_idx` (`managing_organization_id` ASC)  ,
  INDEX `fk_vhdir_endpoint_vhdir_organization2_idx` (`organization_id` ASC)  ,
  CONSTRAINT `fk_endpoint_careteam1`
    FOREIGN KEY (`careteam_id`)
    REFERENCES `spd_medium`.`vhdir_careteam` (`careteam_id`),
  CONSTRAINT `fk_endpoint_endpoint_contact1`
    FOREIGN KEY (`endpoint_contact_id`)
    REFERENCES `spd_medium`.`endpoint_contact` (`endpoint_contact_id`),
  CONSTRAINT `fk_endpoint_healthcare_service1`
    FOREIGN KEY (`healthcare_service_id`)
    REFERENCES `spd_medium`.`vhdir_healthcare_service` (`healthcare_service_id`),
  CONSTRAINT `fk_endpoint_insurance_plan1`
    FOREIGN KEY (`insurance_plan_id`)
    REFERENCES `spd_medium`.`vhdir_insurance_plan` (`insurance_plan_id`),
  CONSTRAINT `fk_endpoint_location1`
    FOREIGN KEY (`location_id`)
    REFERENCES `spd_medium`.`vhdir_location` (`location_id`),
  CONSTRAINT `fk_endpoint_meta_data1`
    FOREIGN KEY (`meta_data_id`)
    REFERENCES `spd_medium`.`fhir_meta_data` (`meta_data_id`),
  CONSTRAINT `fk_endpoint_network1`
    FOREIGN KEY (`network_id`)
    REFERENCES `spd_medium`.`vhdir_network` (`network_id`),
  CONSTRAINT `fk_endpoint_organization_affiliation1`
    FOREIGN KEY (`organization_affiliation_id`)
    REFERENCES `spd_medium`.`vhdir_organization_affiliation` (`organization_affiliation_id`),
  CONSTRAINT `fk_endpoint_practitioner1`
    FOREIGN KEY (`practitioner_id`)
    REFERENCES `spd_medium`.`vhdir_practitioner` (`practitioner_id`),
  CONSTRAINT `fk_endpoint_practitioner_role1`
    FOREIGN KEY (`practitioner_role_id`)
    REFERENCES `spd_medium`.`vhdir_practitioner_role` (`practitioner_role_id`),
  CONSTRAINT `fk_vhdir_endpoint_vhdir_organization1`
    FOREIGN KEY (`managing_organization_id`)
    REFERENCES `spd_medium`.`vhdir_organization` (`organization_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_vhdir_endpoint_vhdir_organization2`
    FOREIGN KEY (`organization_id`)
    REFERENCES `spd_medium`.`vhdir_organization` (`organization_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = latin1
COMMENT = 'An endpoint describes the technical details of a location that can be connected to for the delivery/retrieval of information.\n\nThis profile modifies the base Endpoint resource in the following manner:\n\nConstrains the cardinality of endpoint.contact (0..1), endpoint.contact.system (1..1), and endpoint.contact.value (1..1)\nAll references SHALL conform to the appropriate Validated Healthcare Directory Implementation Guide profile\n\nAdds extensions:\n\nIdentifier status (1..1) - indicates the status of an endpoint’s identifier\n\nVia intermediary (0..1) - a reference to an alternative point of contact for this endpoint\n\nAvailable time (0..*) - indicates when the point of contact for an endpoint is available\n\nUseCase (0..*) - an enumeration of the specific use cases (service descriptions) supported by the endpoint\n\nRank (0..1) - an indication of the preferred order for connecting to an endpoint when multiple endpoints capable of transferring the same content are listed\n\nDigitalCertificate (0..*) - a digital certificate associated with the endpoint\n\nRestriction (0..*) - indicates whether disclosure of any data associated with an endpoint is restricted\n\nExamples:\nThe following are example uses for the vhdir-endpoint profile:\nA Direct address used by cardiologists at the Founding Fathers Memorial Hospital Heart and Vascular Institute\n\nHas mandatory status code, connection type, address url\n\nHas at least one payload type codeable concept,\n\nHas optional rank, name, managing organization, contact point, period\n\nHas 0 to many restrictions, use cases, digital certificates, identifiers, payload \nmime types and header strings.\n\nReferenced by practicioner, practicioner role, organization contact, organization affiliation, careteam, healthcare service, location, network, insurance plane';


-- -----------------------------------------------------
-- Table `spd_medium`.`vhdir_healthcare_service`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `spd_medium`.`vhdir_healthcare_service` ;

CREATE TABLE IF NOT EXISTS `spd_medium`.`vhdir_healthcare_service` (
  `healthcare_service_id` INT(11) NOT NULL AUTO_INCREMENT,
  `meta_data_id` INT(11) NULL DEFAULT NULL,
  `active` TINYINT(4) NOT NULL DEFAULT '1' COMMENT 'Whether this HealthcareService record is in active use',
  `name_id` INT(11) NULL DEFAULT NULL COMMENT 'Description of service as presented to a consumer while searching',
  `comment` VARCHAR(45) NULL DEFAULT NULL COMMENT 'Additional description and/or any specific issues not covered elsewhere',
  `extra_details` VARCHAR(45) NULL DEFAULT NULL COMMENT 'Extra details about the service that can\'t be placed in the other fields',
  `photo` VARCHAR(45) NULL DEFAULT NULL COMMENT 'Attachment.\\\\\\\\nFacilitates quick identification of the service',
  `appointment_required` TINYINT(4) NULL DEFAULT NULL COMMENT 'If an appointment is required for access to this service',
  `availability_exceptions` VARCHAR(45) NULL DEFAULT NULL,
  `provided_by_organization_id` INT(11) NULL DEFAULT NULL COMMENT 'Organization that provides this service',
  `practitioner_role_id` INT(11) NULL DEFAULT NULL COMMENT 'The list of healthcare services that this worker provides for this role\'s Organization/Location(s)',
  `organization_affiliation_id` INT(11) NULL DEFAULT NULL COMMENT 'Healthcare services provided through the role',
  `careteam_id` INT(11) NULL DEFAULT NULL COMMENT 'Services provided by the care team\\\\\\\\nURL: http://hl7.org/fhir/uv/vhdir/StructureDefinition/healthcareservice-reference',
  PRIMARY KEY (`healthcare_service_id`),
  INDEX `fk_healthcare_service_practitioner_role1_idx` (`practitioner_role_id` ASC)  ,
  INDEX `fk_healthcare_service_organization_affiliation1_idx` (`organization_affiliation_id` ASC)  ,
  INDEX `fk_healthcare_service_careteam1_idx` (`careteam_id` ASC)  ,
  INDEX `fk_healthcare_service_meta_data1_idx` (`meta_data_id` ASC)  ,
  INDEX `fk_healthcare_service_organization1_idx` (`provided_by_organization_id` ASC)  ,
  INDEX `fk_healthcare_service_name1_idx` (`name_id` ASC)  ,
  CONSTRAINT `fk_healthcare_service_careteam1`
    FOREIGN KEY (`careteam_id`)
    REFERENCES `spd_medium`.`vhdir_careteam` (`careteam_id`),
  CONSTRAINT `fk_healthcare_service_meta_data1`
    FOREIGN KEY (`meta_data_id`)
    REFERENCES `spd_medium`.`fhir_meta_data` (`meta_data_id`),
  CONSTRAINT `fk_healthcare_service_name1`
    FOREIGN KEY (`name_id`)
    REFERENCES `spd_medium`.`name` (`name_id`),
  CONSTRAINT `fk_healthcare_service_organization1`
    FOREIGN KEY (`provided_by_organization_id`)
    REFERENCES `spd_medium`.`vhdir_organization` (`organization_id`),
  CONSTRAINT `fk_healthcare_service_organization_affiliation1`
    FOREIGN KEY (`organization_affiliation_id`)
    REFERENCES `spd_medium`.`vhdir_organization_affiliation` (`organization_affiliation_id`),
  CONSTRAINT `fk_healthcare_service_practitioner_role1`
    FOREIGN KEY (`practitioner_role_id`)
    REFERENCES `spd_medium`.`vhdir_practitioner_role` (`practitioner_role_id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = latin1
COMMENT = 'The HealthcareService resource typically describes services offered by an organization/practitioner at a location. The resource may be used to encompass a variety of services covering the entire healthcare spectrum, including promotion, prevention, diagnstics, hospital and ambulatory care, home care, long-term care, and other health-related and community services.\n\nThis profile modifies the base HealthcareService resource in the following manner:\n\nConstrains the cardinality of healthcareService.active (1..1), healthcareService.telecom.system (1..1), and healthcareService.telecom.value (1..1)\n\nAll references SHALL conform to the appropriate Validated Healthcare Directory Implementation Guide profile\n\nAdds extensions:\n\nIdentifier status (1..1) - indicates the status of a service’s identifier\n\nVia intermediary (0..1) - a reference to an alternative point of contact for this service\n\nAvailable time (0..*) - indicates when a service is available for contact\n\nNewPatients (0..*) - indicates whether the service is accepting new patients\n\nRestriction (0..*) - indicates whether disclosure of any data associated with a service is restricted\n\nExamples:\nThe following are example uses for the vhdir-healthcareservice profile:\nCardiology Services\n\n\nHas mandatory active boolean, \n\nHas optional providedBy organization, name, comment, extraDetails, photo, appointment required boolean, and availability exceptions string\n\nHas 0 to many restrictions, new patients descriptions, identifiers, categories, types, specialties, locations, telecoms, coverage areas (locations), service provision codes, eligibility requirements, programs, characteristics, communications, referral methods, available times, unavailable times, and endpoints.\n\nReferenced by practitioner role, organization affiliation, careteam';


-- -----------------------------------------------------
-- Table `spd_medium`.`vhdir_insurance_plan`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `spd_medium`.`vhdir_insurance_plan` ;

CREATE TABLE IF NOT EXISTS `spd_medium`.`vhdir_insurance_plan` (
  `insurance_plan_id` INT(11) NOT NULL AUTO_INCREMENT,
  `meta_data_id` INT(11) NULL DEFAULT NULL,
  `status` VARCHAR(45) NOT NULL COMMENT 'draft | active | retired | unknown\\\\\\\\nBinding: PublicationStatus (required)',
  `name` VARCHAR(45) NULL DEFAULT NULL COMMENT 'Official name',
  `alias` VARCHAR(45) NULL DEFAULT NULL COMMENT 'Alternate names',
  `period_start` DATETIME NULL DEFAULT NULL COMMENT 'When the product is available',
  `period_end` DATETIME NULL DEFAULT NULL,
  `organization_id` INT(11) NULL DEFAULT NULL COMMENT 'Insurance plan(s) offered to the organization\'s employees\\\\\\\\nURL: ',
  `owned_by_organization_id` INT(11) NOT NULL COMMENT 'Plan issuer',
  `administered_by_organization_id` INT(11) NOT NULL COMMENT 'Product administrator',
  PRIMARY KEY (`insurance_plan_id`),
  INDEX `fk_insurance_plan_organization1_idx` (`organization_id` ASC)  ,
  INDEX `fk_insurance_plan_meta_data1_idx` (`meta_data_id` ASC)  ,
  INDEX `fk_insurance_plan_organization2_idx` (`owned_by_organization_id` ASC)  ,
  INDEX `fk_insurance_plan_organization3_idx` (`administered_by_organization_id` ASC)  ,
  CONSTRAINT `fk_insurance_plan_meta_data1`
    FOREIGN KEY (`meta_data_id`)
    REFERENCES `spd_medium`.`fhir_meta_data` (`meta_data_id`),
  CONSTRAINT `fk_insurance_plan_organization1`
    FOREIGN KEY (`organization_id`)
    REFERENCES `spd_medium`.`vhdir_organization` (`organization_id`),
  CONSTRAINT `fk_insurance_plan_organization2`
    FOREIGN KEY (`owned_by_organization_id`)
    REFERENCES `spd_medium`.`vhdir_organization` (`organization_id`),
  CONSTRAINT `fk_insurance_plan_organization3`
    FOREIGN KEY (`administered_by_organization_id`)
    REFERENCES `spd_medium`.`vhdir_organization` (`organization_id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = latin1
COMMENT = 'A product is a discrete package of health insurance coverage benefits that are offered under a particular network type. A given payer’s products typically differ by network type and/or covered benefits. A plan pairs a product’s covered benefits with the particular cost sharing structure offered to a consumer. A given product may comprise multiple plans (i.e. each plan offers different cost sharing requirements for the same set of covered benefits).\n\nInsurancePlan describes a health insurance offering comprised of a list of covered benefits (i.e. the product), costs associated with those benefits (i.e. the plan), and additional information about the offering, such as who it is owned and administered by, a coverage area, contact information, etc.\n\nThis profile modifies the base InsurancePlan resource in the following manner:\n\nConstrains the cardinality of InsurancePlan.status (1..1), InsurancePlan.ownedBy (1..1), InsurancePlan.administeredBy (1..1), InsurancePlan.contact.name.family (1..1), InsurancePlan.contact.name.given (1..*), InsurancePlan.contact.telecom.system (1..1), and InsurancePlan.contact.telecom.value (1..1)\n\nAll references SHALL conform to the appropriate Validated Healthcare Directory Implementation Guide profile\n\nAdds extensions:\n\nIdentifier status (1..1) - indicates the status of a product or plan’s identifier\n\nVia intermediary (0..1) - a reference to an alternative point of contact for this InsurancePlan\n\nAvailable time (0..*) - indicates when the point of contact for an InsurancePlan is available\n\nRestriction (0..*) - indicates whether disclosure of any data associated with a service is restricted\n\nExamples:\nThe following are example uses for the vhdir-insuranceplan profile:\nPatriot PPO Standard\n\nHas mandatory status code, ownedBy organization, administeredBy organization\n\nHas optional name, period\n\nHas 0 to many identifiers, type codeable concepts, aliases, coverage area locations, contacts, endpoints, networks, coverages, \n\n\n';


-- -----------------------------------------------------
-- Table `spd_medium`.`vhdir_location`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `spd_medium`.`vhdir_location` ;

CREATE TABLE IF NOT EXISTS `spd_medium`.`vhdir_location` (
  `location_id` INT(11) NOT NULL AUTO_INCREMENT,
  `meta_data_id` INT(11) NULL DEFAULT NULL,
  `status` VARCHAR(45) NOT NULL COMMENT 'active | suspended | inactive',
  `name` VARCHAR(45) NULL DEFAULT NULL COMMENT 'Name of the location as used by humans',
  `alias` VARCHAR(45) NULL DEFAULT NULL COMMENT 'A list of alternate names that the location is known as, or was known as, in the past',
  `description` VARCHAR(45) NULL DEFAULT NULL COMMENT 'Additional details about the location that could be displayed as further information to identify the location beyond its name',
  `location_boundary_geojson` VARCHAR(45) NULL DEFAULT NULL COMMENT 'A boundary shape that represents the outside edge of the location (in GeoJSON format)  This should really be multiple geolocartion refernces.',
  `latitude` DECIMAL(10,0) NULL DEFAULT NULL,
  `longitude` DECIMAL(10,0) NULL DEFAULT NULL,
  `altitude` DECIMAL(10,0) NULL DEFAULT NULL,
  `availability_exceptions` VARCHAR(45) NULL DEFAULT NULL,
  `practitioner_role_id` INT(11) NULL DEFAULT NULL COMMENT 'The location(s) at which this practitioner provides care',
  `organization_affiliation_id` INT(11) NULL DEFAULT NULL COMMENT 'The location(s) at which the role occurs',
  `careteam_id` INT(11) NULL DEFAULT NULL COMMENT 'Where the care team operates\\\\\\\\nURL: http://hl7.org/fhir/uv/vhdir/StructureDefinition/location-reference',
  `healthcare_service_id` INT(11) NULL DEFAULT NULL COMMENT 'Location(s) where service may be provided',
  `healthcare_service_coverage_area_id` INT(11) NULL DEFAULT NULL COMMENT 'Location(s) service is intended for/available to',
  `address_id` INT(11) NULL DEFAULT NULL COMMENT 'Physical location',
  `managing_organization_id` INT(11) NULL DEFAULT NULL COMMENT 'Organization responsible for provisioning and upkeep',
  `part_of_location_id` INT(11) NULL DEFAULT NULL COMMENT 'Another Location this one is physically a part of',
  `network_reference_id` INT(11) NULL DEFAULT NULL COMMENT 'Network coverage area\\\\\\\\nURL: http://hl7.org/fhir/uv/vhdir/StructureDefinition/location-reference',
  `insurance_plan_coverage_area_id` INT(11) NULL DEFAULT NULL COMMENT 'Where product applies',
  `plan_coverage_area_id` INT(11) NULL DEFAULT NULL COMMENT 'Where plan applies',
  `qualification_where_valid_id` INT(11) NULL COMMENT 'Where a qualification is valid',
  `physcial_type_cc_id` INT(11) NOT NULL COMMENT 'Physical form of the location\nBinding: LocationType (example)',
  PRIMARY KEY (`location_id`),
  INDEX `fk_location_practitioner_role1_idx` (`practitioner_role_id` ASC)  ,
  INDEX `fk_location_organization_affiliation1_idx` (`organization_affiliation_id` ASC)  ,
  INDEX `fk_location_careteam1_idx` (`careteam_id` ASC)  ,
  INDEX `fk_location_healthcare_service1_idx` (`healthcare_service_id` ASC)  ,
  INDEX `fk_location_healthcare_service2_idx` (`healthcare_service_coverage_area_id` ASC)  ,
  INDEX `fk_location_meta_data1_idx` (`meta_data_id` ASC)  ,
  INDEX `fk_location_address1_idx` (`address_id` ASC)  ,
  INDEX `fk_location_organization1_idx` (`managing_organization_id` ASC)  ,
  INDEX `fk_location_location1_idx` (`part_of_location_id` ASC)  ,
  INDEX `fk_location_network1_idx` (`network_reference_id` ASC)  ,
  INDEX `fk_location_insurance_plan1_idx` (`insurance_plan_coverage_area_id` ASC)  ,
  INDEX `fk_vhdir_location_plan1_idx` (`plan_coverage_area_id` ASC)  ,
  INDEX `fk_vhdir_location_qualification1_idx` (`qualification_where_valid_id` ASC)  ,
  INDEX `fk_vhdir_location_fhir_codeable_concept1_idx` (`physcial_type_cc_id` ASC)  ,
  CONSTRAINT `fk_location_address1`
    FOREIGN KEY (`address_id`)
    REFERENCES `spd_medium`.`address` (`address_id`),
  CONSTRAINT `fk_location_careteam1`
    FOREIGN KEY (`careteam_id`)
    REFERENCES `spd_medium`.`vhdir_careteam` (`careteam_id`),
  CONSTRAINT `fk_location_healthcare_service1`
    FOREIGN KEY (`healthcare_service_id`)
    REFERENCES `spd_medium`.`vhdir_healthcare_service` (`healthcare_service_id`),
  CONSTRAINT `fk_location_healthcare_service2`
    FOREIGN KEY (`healthcare_service_coverage_area_id`)
    REFERENCES `spd_medium`.`vhdir_healthcare_service` (`healthcare_service_id`),
  CONSTRAINT `fk_location_insurance_plan1`
    FOREIGN KEY (`insurance_plan_coverage_area_id`)
    REFERENCES `spd_medium`.`vhdir_insurance_plan` (`insurance_plan_id`),
  CONSTRAINT `fk_location_location1`
    FOREIGN KEY (`part_of_location_id`)
    REFERENCES `spd_medium`.`vhdir_location` (`location_id`),
  CONSTRAINT `fk_location_meta_data1`
    FOREIGN KEY (`meta_data_id`)
    REFERENCES `spd_medium`.`fhir_meta_data` (`meta_data_id`),
  CONSTRAINT `fk_location_network1`
    FOREIGN KEY (`network_reference_id`)
    REFERENCES `spd_medium`.`vhdir_network` (`network_id`),
  CONSTRAINT `fk_location_organization1`
    FOREIGN KEY (`managing_organization_id`)
    REFERENCES `spd_medium`.`vhdir_organization` (`organization_id`),
  CONSTRAINT `fk_location_organization_affiliation1`
    FOREIGN KEY (`organization_affiliation_id`)
    REFERENCES `spd_medium`.`vhdir_organization_affiliation` (`organization_affiliation_id`),
  CONSTRAINT `fk_location_practitioner_role1`
    FOREIGN KEY (`practitioner_role_id`)
    REFERENCES `spd_medium`.`vhdir_practitioner_role` (`practitioner_role_id`),
  CONSTRAINT `fk_vhdir_location_plan1`
    FOREIGN KEY (`plan_coverage_area_id`)
    REFERENCES `spd_medium`.`plan` (`plan_id`),
  CONSTRAINT `fk_vhdir_location_qualification1`
    FOREIGN KEY (`qualification_where_valid_id`)
    REFERENCES `spd_medium`.`qualification` (`qualification_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_vhdir_location_fhir_codeable_concept1`
    FOREIGN KEY (`physcial_type_cc_id`)
    REFERENCES `spd_medium`.`fhir_codeable_concept` (`codeable_concept_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = latin1
COMMENT = 'A location is the physical place where healthcare services are provided, practitioners are employed, organizations are based, etc. Locations can range in scope from a room in a building to a geographic region/area.' /* comment truncated */ /*
This profile modifies the base Lractitioner resource in the following manner:

Constrains the cardinality of location.status (1..1), location.operationalStatus (0..0), location.mode (0..0), location.telecom.system (1..1), and location.telecom.value (1..1),

All references SHALL conform to the appropriate Validated Healthcare Directory Implementation Guide profile

Adds extensions:

Identifier status (1..1) - indicates the status of a location’s identifier

Via intermediary (0..1) - a reference to an alternative point of contact for this location

Available time (0..*) - indicates when a location is available for contact

Boundary-geojson (0..*) - indicates a region/area for the location

Accessibility (0..*) - indicates accessibility options available at the location (e.g. handicap accessibility)

EHR (0..*) - provides information about the EHR product(s) used at the location

NewPatients (0..*) - indicates whether the location is accepting new patients

NewPatientProfile (0..*) - a description of the type of patients the location accepts (e.g. pediatric only)

Restriction (0..*) - indicates whether disclosure of any data associated with a location is restricted

Examples:
The following are example uses for the vhdir-location profile:
Founding Fathers Memorial Hospital, Main Campus

Has mandatory status code, 

Has optional name, description, address, physical type codeable concept, position, managing organization, partOf location, availability exceptions.

Has 0 to many geojson boundaries, accessibility codeable concepts, ehrs, new patients, new patient profile, restrictions, identifiers, aliases, type codeable concepts, telecoms, hours of operation, and endpoints.

Referenced by  practiioner role, organization affiliation, careteam, healthcare service, address, network, insurance plan coverage, plan coverage, qualification resources.*/;


-- -----------------------------------------------------
-- Table `spd_medium`.`vhdir_network`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `spd_medium`.`vhdir_network` ;

CREATE TABLE IF NOT EXISTS `spd_medium`.`vhdir_network` (
  `network_id` INT(11) NOT NULL AUTO_INCREMENT,
  `meta_data_id` INT(11) NULL DEFAULT NULL,
  `active` TINYINT(4) NOT NULL DEFAULT '1' COMMENT 'Whether the network\'s record is still in active use.',
  `name` VARCHAR(45) NULL DEFAULT NULL,
  `alias` VARCHAR(4096) NULL DEFAULT NULL COMMENT 'Alternate names by which the Network is known. Stored as a delimited list of names. (Using semi-colon as the delimiter).',
  `period_start` DATETIME NULL DEFAULT NULL COMMENT 'Valid time period for this Network\\\\\\\\nURL: http://hl7.org/fhir/StructureDefinition/organization-period',
  `period_end` DATETIME NULL DEFAULT NULL,
  `part_of_resource_reference_id` INT(11) NULL DEFAULT NULL COMMENT '\nReference(VhDir Organization | VhDir Organization Affiliation)\nReference to organization that owns the network',
  `practitioner_role_id` INT(11) NULL DEFAULT NULL COMMENT 'A health insurance provider network the practitioner belongs to\\\\\\\\nURL: http://hl7.org/fhir/uv/vhdir/StructureDefinition/network-reference',
  `organization_affiliation_id` INT(11) NULL DEFAULT NULL COMMENT 'Health insurance provider network in which the participatingOrganization provides the role\'s services (if defined) at the indicated locations (if defined)',
  `insurance_plan_id` INT(11) NULL DEFAULT NULL COMMENT 'What networks are Included',
  `coverage_id` INT(11) NULL DEFAULT NULL,
  `plan_id` INT(11) NULL DEFAULT NULL,
  PRIMARY KEY (`network_id`),
  INDEX `fk_network_practitioner_role1_idx` (`practitioner_role_id` ASC)  ,
  INDEX `fk_network_organization_affiliation1_idx` (`organization_affiliation_id` ASC)  ,
  INDEX `fk_network_meta_data1_idx` (`meta_data_id` ASC)  ,
  INDEX `fk_network_insurance_plan1_idx` (`insurance_plan_id` ASC)  ,
  INDEX `fk_vhdir_network_coverage1_idx` (`coverage_id` ASC)  ,
  INDEX `fk_vhdir_network_plan1_idx` (`plan_id` ASC)  ,
  INDEX `fk_vhdir_network_resource_reference1_idx` (`part_of_resource_reference_id` ASC)  ,
  CONSTRAINT `fk_network_insurance_plan1`
    FOREIGN KEY (`insurance_plan_id`)
    REFERENCES `spd_medium`.`vhdir_insurance_plan` (`insurance_plan_id`),
  CONSTRAINT `fk_network_meta_data1`
    FOREIGN KEY (`meta_data_id`)
    REFERENCES `spd_medium`.`fhir_meta_data` (`meta_data_id`),
  CONSTRAINT `fk_network_organization_affiliation1`
    FOREIGN KEY (`organization_affiliation_id`)
    REFERENCES `spd_medium`.`vhdir_organization_affiliation` (`organization_affiliation_id`),
  CONSTRAINT `fk_network_practitioner_role1`
    FOREIGN KEY (`practitioner_role_id`)
    REFERENCES `spd_medium`.`vhdir_practitioner_role` (`practitioner_role_id`),
  CONSTRAINT `fk_vhdir_network_coverage1`
    FOREIGN KEY (`coverage_id`)
    REFERENCES `spd_medium`.`coverage` (`coverage_id`),
  CONSTRAINT `fk_vhdir_network_plan1`
    FOREIGN KEY (`plan_id`)
    REFERENCES `spd_medium`.`plan` (`plan_id`),
  CONSTRAINT `fk_vhdir_network_resource_reference1`
    FOREIGN KEY (`part_of_resource_reference_id`)
    REFERENCES `spd_medium`.`resource_reference` (`resource_reference_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'A Network refers to a healthcare provider insurance network. \n\nA healthcare provider insurance network is an aggregation of organizations and individuals that deliver a set of services across a geography through health insurance products/plans. \n\nA network is typically owned by a payer.\nIn the VHDir IG, individuals and organizations are represented as participants in a Network through the practitionerRole and organizationAffiliation resources, respectively.\n\nNetwork is a profile on the Organization resource. This profile modifies the base Organization resource in the following manner:\nConstrains the cardinality of organization.active (1..1), organization.telecom (0..0), organization.partOf (1..1), organization.contact.name.family (1..1), organization.contact.name.given (1..*), organization.contact.telecom.system (1..1), and organization.contact.telecom.value (1..1)\n\nAll references SHALL conform to the appropriate Validated Healthcare Directory Implementation Guide profile\n\nAdds extensions:\n\nIdentifier status (1..1) - indicates the status of an organization’s identifier\n\nVia intermediary (0..1) - a reference to an alternative point of contact for this organization\n\nAvailable time (0..*) - indicates when an organization is available for contact\n\nPeriod (0..1) - Represents a time period for the network\n\nCoverage area (0..*) - Indicates a coverage area for the network\n\nRestriction (0..*) - indicates whether disclosure of any data associated with a network is restricted\n\nExamples:\nThe following are example uses for the vhdir-network profile:\nPatriot Preferred Provider Network\nPatriot Dental Provider Network\n\nHas mandatory active boolean, partOf reference, \n\nHas optional period, name, address.\n\nHas 0 to many locations, restrictions, identifiers, type codeable concpets, aliases addresses, contacts, and endpoints\n\nReferenced by practiioner roled, org';


-- -----------------------------------------------------
-- Table `spd_medium`.`vhdir_organization`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `spd_medium`.`vhdir_organization` ;

CREATE TABLE IF NOT EXISTS `spd_medium`.`vhdir_organization` (
  `organization_id` INT(11) NOT NULL AUTO_INCREMENT,
  `meta_data_id` INT(11) NULL,
  `active` TINYINT(4) NOT NULL DEFAULT 1 COMMENT 'Whether the organization\'s record is still in active use',
  `name` VARCHAR(512) NOT NULL DEFAULT 'organization' COMMENT 'Name used for the organization',
  `description` VARCHAR(1024) NULL DEFAULT NULL,
  `partOf_organization_name` VARCHAR(512) NULL,
  `partOf_organization_id` INT(11) NULL DEFAULT NULL COMMENT 'Reference(VhDir Organization)\nThe organization of which this organization forms a part',
  PRIMARY KEY (`organization_id`),
  INDEX `fk_organization_organization1_idx` (`partOf_organization_id` ASC)  ,
  INDEX `fk_organization_meta_data1_idx` (`meta_data_id` ASC)  ,
  CONSTRAINT `fk_organization_meta_data1`
    FOREIGN KEY (`meta_data_id`)
    REFERENCES `spd_medium`.`fhir_meta_data` (`meta_data_id`),
  CONSTRAINT `fk_organization_organization1`
    FOREIGN KEY (`partOf_organization_id`)
    REFERENCES `spd_medium`.`vhdir_organization` (`organization_id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = latin1
COMMENT = 'An organization is a formal or informal grouping of people or organizations with a common purpose, such as a company, institution, corporation, community group, or healthcare practice.' /* comment truncated */ /*
This profile modifies the base Organization resource in the following manner:
Constrains the cardinality of organization.active (1..1), organization.type (1..), organization.name (1..1), organization.telecom.system (1..1), organization.telecom.value (1..1), organization.contact.name.family (1..1), organization.contact.name.given (1..), organization.contact.telecom.system (1..1), and organization.contact.telecom.value (1..1)

All references SHALL conform to the appropriate Validated Healthcare Directory Implementation Guide profile

Adds extensions:

Identifier status (1..1) - indicates the status of an organization’s identifier

Via intermediary (0..1) - a reference to an alternative point of contact for this organization

Available time (0..*) - indicates when an organization is available for contact

Geolocation (0..1) - indicates the absolute geographic location of an organization’s address

Alias type (0..1) - indicates whether an organization’s alias is a historical name or legal alternative name

Alias period (0..1) - indicates a period of time for which an organization used an alias

Description (0..1) - a friendly description of the organization

Qualification (0..*) - indicates whether the organization has any formal qualifications

DigitalCertificate (0..*) - a digital certificate associated with the organization

InsurancePlan (0..*) - indicates the health insurance products the organization offers to its employees

Restriction (0..*) - indicates whether disclosure of any data associated with an organization is restricted

Examples:
The following are example uses for the vhdir-organization profile:
Founding Fathers Memorial Hospital

Has mandatory active boolean, name 
Has at least one type codeable concept.

Has optional description, partOf organization

Has 0 to many certificates, qualifications, restrictions, insurance plan references, identifiters, aliases, telecoms, addresses, contacts, and endpoints.

*/;


-- -----------------------------------------------------
-- Table `spd_medium`.`vhdir_organization_affiliation`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `spd_medium`.`vhdir_organization_affiliation` ;

CREATE TABLE IF NOT EXISTS `spd_medium`.`vhdir_organization_affiliation` (
  `organization_affiliation_id` INT(11) NOT NULL AUTO_INCREMENT,
  `meta_data_id` INT(11) NULL,
  `active` TINYINT(4) NULL DEFAULT NULL COMMENT 'Whether this organization affiliation record is in active use',
  `period_start` DATETIME NULL DEFAULT NULL COMMENT 'The period during which the participatingOrganization is affiliated with the primary organization',
  `period_end` DATETIME NULL DEFAULT NULL,
  `organization_id` INT(11) NULL DEFAULT NULL COMMENT 'Organization where the role is available',
  `participating_organization_id` INT(11) NULL DEFAULT NULL COMMENT 'Organization that provides/performs the role (e.g. providing services or is a member of)',
  PRIMARY KEY (`organization_affiliation_id`),
  INDEX `fk_organization_affiliation_meta_data1_idx` (`meta_data_id` ASC)  ,
  INDEX `fk_organization_affiliation_organization1_idx` (`organization_id` ASC)  ,
  INDEX `fk_organization_affiliation_organization2_idx` (`participating_organization_id` ASC)  ,
  UNIQUE INDEX `active_UNIQUE` (`active` ASC)  ,
  CONSTRAINT `fk_organization_affiliation_meta_data1`
    FOREIGN KEY (`meta_data_id`)
    REFERENCES `spd_medium`.`fhir_meta_data` (`meta_data_id`),
  CONSTRAINT `fk_organization_affiliation_organization1`
    FOREIGN KEY (`organization_id`)
    REFERENCES `spd_medium`.`vhdir_organization` (`organization_id`),
  CONSTRAINT `fk_organization_affiliation_organization2`
    FOREIGN KEY (`participating_organization_id`)
    REFERENCES `spd_medium`.`vhdir_organization` (`organization_id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = latin1
COMMENT = 'The OrganizationAffiliation resource describes relationships between two or more organizations, including the services one organization provides another, the location(s) where they provide services, the availability of those services, electronic endpoints, and other relevant information.' /* comment truncated */ /*
OrganizationAffiliation addresses the need to define a non-hierarchical relationship between two or more organizations. For example:

-  One organization may provide services to another organization

-  Two or more organizations may form a partnership or joint venture

-  An organization may be a member of another organization, but not owned by it (e.g. a hospital is a member the American Hospital Association, a hospital is a member of a health information exchange network)

OrganizationAffiliation is similar in structure to practitionerRole. Instead of references to practitioner and organization (as in practitionerRole), organizationaffiliation includes references to a participatingOrg and an organization. The participating organization provides “services” to the primary organization (much like a practitioner provides services to an organization). Using the three examples above:

The participating organization provides services to the primary organization

The joint venture is considered the primary organization, and partners within the joint venture are considered participating organizations (requires two organizationaffiliation resource instances)

An association is the primary organization, and its members are participating organizations.

OrganizationAffiliation is also used to indicate when an organization provides services for a health insurance provider network.

This profile modifies the base OrganizationAffiliation resource in the following manner:
Constrains the cardinality of OrganizationAffiliation.active (1..1), OrganizationAffiliation.telecom.system (1..1), and OrganizationAffiliation.telecom.value (1..1)

All references SHALL conform to the appropriate Validated Healthcare Directory Implementation Guide profile

Adds extensions:

Identifier status (1..1) - indicates the status of an identifier for the role

Via intermediary (0..1) - a reference to an alternative point of contact for this role

Available time (0..*) - indicates when the point of contact for this role is available

Restriction (0..*) - indicates whether disclosure of any data associated with this role is restricted

Examples:
The following are example uses for the vhdir-organizationaffiliation profile:
Independence Rehabilitation provides rehab services to Founding Fathers Memorial Hospital
Founding Fathers Memorial Hospital is a member of Monument HIE


Has mandatory active boolean
Has optional period, organization, participatingOrganization
Has 0 to many restrictions, identifiers, networks, code codeable concepts, specialty codeable concepts, locations, healthcare services, telecoms, and endpoints.*/;


-- -----------------------------------------------------
-- Table `spd_medium`.`vhdir_practitioner`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `spd_medium`.`vhdir_practitioner` ;

CREATE TABLE IF NOT EXISTS `spd_medium`.`vhdir_practitioner` (
  `practitioner_id` INT(11) NOT NULL AUTO_INCREMENT,
  `meta_data_id` INT(11) NULL DEFAULT NULL,
  `active` TINYINT(4) NOT NULL DEFAULT '1' COMMENT 'Whether this practitioner\'s record is in active use',
  `gender` VARCHAR(10) NULL DEFAULT NULL COMMENT 'male | female | other | unknown\nBinding: AdministrativeGender (required)',
  `birthDate` DATE NULL DEFAULT NULL COMMENT 'The date on which the practitioner was born',
  `photo` VARCHAR(45) NULL DEFAULT NULL COMMENT 'Image of the person',
  PRIMARY KEY (`practitioner_id`),
  INDEX `fk_practitioner_meta_data1_idx` (`meta_data_id` ASC)  ,
  CONSTRAINT `fk_practitioner_meta_data1`
    FOREIGN KEY (`meta_data_id`)
    REFERENCES `spd_medium`.`fhir_meta_data` (`meta_data_id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = latin1
COMMENT = 'A practitioner is a person who is directly or indirectly involved in providing healthcare.' /* comment truncated */ /*
This profile modifies the base Practitioner resource in the following manner:
Constrains the cardinality of practitioner.active (1..1), practitioner.name (1..1), practitioner.name.family (1..1), practitioner.name.given (1..*), practitioner.telecom.system (1..1), practitioner.telecom.value (1..1), practitioner.photo (0..1), and practitioner.qualification.issuer (1..1)

All references SHALL conform to the appropriate Validated Healthcare Directory Implementation Guide profile

Adds extensions:

Identifier status (1..1) - indicates the status of a practitioner’s identifier

Via intermediary (0..1) - a reference to an alternative point of contact for this practitioner

Available time (0..*) - indicates when a practitioner is available for contact

Geolocation (0..1) - indicates the absolute geographic location of a practitioner’s address

Endpoint (0..*) - reference(s) to the endpoint resource, indicating technical endpoints for the practitioner independent of their role at an organization (such as a personal Direct address)

Accessibility (0..*) - indicates accessibility options offered by the practitioner (e.g. cultural competence)

Proficiency (0..1) - indicates a practitioner’s level of spoken proficiency with the language(s) specified in practitioner.communication

DigitalCertificate (0..*) - a digital certificate associated with the practitioner

Qualification (0..1) - provides additional information about a practitioner’s qualifications, including where they are valid and the current/historical status

Restriction (0..*) - indicates whether disclosure of any data associated with a practitioner is restricted

Examples:
The following are example uses for the vhdir-practitioner profile:
George Washington MD, a cardiologist

Has mandatory active boolean
Has at least one name

Has optional gender, birthDate, photo

Has 0 to many restrictions, endpoints, accessibility codeable concepts, certificates, identifiers, telecoms, addresses, qualifications, and comunication languages, 

Referenced by practitioner role.*/;


-- -----------------------------------------------------
-- Table `spd_medium`.`vhdir_practitioner_role`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `spd_medium`.`vhdir_practitioner_role` ;

CREATE TABLE IF NOT EXISTS `spd_medium`.`vhdir_practitioner_role` (
  `practitioner_role_id` INT(11) NOT NULL AUTO_INCREMENT,
  `meta_data_id` INT(11) NULL DEFAULT NULL,
  `active` TINYINT(4) NOT NULL DEFAULT '1' COMMENT 'Whether this practitioner role record is in active use',
  `period_start` DATETIME NULL DEFAULT NULL COMMENT 'The period during which the practitioner is authorized to perform in these role(s)',
  `period_end` DATETIME NULL DEFAULT NULL,
  `practitioner_id` INT(11) NULL DEFAULT NULL COMMENT 'Practitioner that is able to provide the defined services for the organization',
  `organization_id` INT(11) NULL DEFAULT NULL COMMENT 'Organization where the roles are available',
  `availability_exceptions` VARCHAR(45) NULL DEFAULT NULL COMMENT 'Description of availability exceptions',
  PRIMARY KEY (`practitioner_role_id`),
  INDEX `fk_practitioner_role_organization1_idx` (`organization_id` ASC)  ,
  INDEX `fk_practitioner_role_meta_data1_idx` (`meta_data_id` ASC)  ,
  INDEX `fk_practitioner_role_practitioner1_idx` (`practitioner_id` ASC)  ,
  CONSTRAINT `fk_practitioner_role_meta_data1`
    FOREIGN KEY (`meta_data_id`)
    REFERENCES `spd_medium`.`fhir_meta_data` (`meta_data_id`),
  CONSTRAINT `fk_practitioner_role_organization1`
    FOREIGN KEY (`organization_id`)
    REFERENCES `spd_medium`.`vhdir_organization` (`organization_id`),
  CONSTRAINT `fk_practitioner_role_practitioner1`
    FOREIGN KEY (`practitioner_id`)
    REFERENCES `spd_medium`.`vhdir_practitioner` (`practitioner_id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = latin1
COMMENT = 'PractitionerRole describes the role a practitioner plays at an organization, including the services they provide, the location(s) where they work, and their availability, electronic endpoints, and other relevant information.' /* comment truncated */ /*
This profile modifies the base PractitionerRole resource in the following manner:
Constrains the cardinality of practitionerRole.active (1..1) and practitionerRole.code (1..*)

All references SHALL conform to the appropriate Validated Healthcare Directory Implementation Guide profile

Adds extensions:

Identifier status (1..1) - indicates the status of a practitionerRole’s identifier

Via intermediary (0..1) - a reference to an alternative point of contact for a practitioner in a role

Available time (0..*) - indicates when the contact point for a practitioner in a role is available

Network (0..*) - a reference to the healthcare provider insurance networks the practitioner participates in through their role

NewPatients (0..*) - indicates whether the practitioner is accepting new patients in their role

NewPatientProfile (0..*) - a description of the type of new patients a practitioner accepts in their role (e.g. pediatric only)

Qualification (0..*) - indicates qualifications the practitioner has through their role (e.g. registered to prescribe controlled substances)

DigitalCertificate (0..*) - a digital certificate associated with the practitioner in their role

Restriction (0..*) - indicates whether disclosure of any data associated with a practitionerRole is restricted

Adds new value sets/updates value set bindings:

Examples:
The following are example uses for the vhdir-practitionerrole profile:
George Washington practices at Founding Fathers Memorial Hospital

Has mandatory active boolean

Has at least one code codeableConcept

Has optional period, practitioner references, organization reference, availabilityExceptions.

Has 0 to many network references, new patients, new patient profiles, certificates, qualifications, restrictions, identifiers, specialty codeable concepts, locations, health services, telecoms, available times, unavailable times, and endpoints.*/;


-- -----------------------------------------------------
-- Table `spd_medium`.`vhdir_restriction`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `spd_medium`.`vhdir_restriction` ;

CREATE TABLE IF NOT EXISTS `spd_medium`.`vhdir_restriction` (
  `restriction_id` INT(11) NOT NULL AUTO_INCREMENT,
  `meta_data_id` INT(11) NULL DEFAULT NULL,
  `status` VARCHAR(45) NOT NULL COMMENT 'Indicates the current state of this restriction\nBinding: ConsentState (required)',
  `scope_cc_id` INT(11) NOT NULL COMMENT 'Which of the four areas this resource covers (extensible)\nBinding: ConsentScopeCodes (extensible)',
  `date_time` DATETIME NULL DEFAULT NULL COMMENT 'date/time of last update for this restriction',
  `provision_id` INT(11) NULL DEFAULT NULL COMMENT 'Access rights',
  `practitioner_id` INT(11) NULL DEFAULT NULL,
  `practitioner_role_id` INT(11) NULL DEFAULT NULL,
  `organization_id` INT(11) NULL DEFAULT NULL,
  `organization_affiliation_id` INT(11) NULL DEFAULT NULL,
  `careteam_id` INT(11) NULL DEFAULT NULL COMMENT 'Restriction\\\\\\\\nURL: http://hl7.org/fhir/uv/vhdir/StructureDefinition/usage-restriction',
  `endpoint_id` INT(11) NULL DEFAULT NULL COMMENT 'Restriction\\\\\\\\nURL: http://hl7.org/fhir/uv/vhdir/StructureDefinition/usage-restriction',
  `healthcare_service_id` INT(11) NULL DEFAULT NULL,
  `location_id` INT(11) NULL DEFAULT NULL,
  `network_id` INT(11) NULL DEFAULT NULL,
  `insurance_plan_id` INT(11) NULL DEFAULT NULL,
  PRIMARY KEY (`restriction_id`),
  INDEX `fk_restriction_practitioner1_idx` (`practitioner_id` ASC)  ,
  INDEX `fk_restriction_practitioner_role1_idx` (`practitioner_role_id` ASC)  ,
  INDEX `fk_restriction_organization1_idx` (`organization_id` ASC)  ,
  INDEX `fk_restriction_organization_affiliation1_idx` (`organization_affiliation_id` ASC)  ,
  INDEX `fk_restriction_careteam1_idx` (`careteam_id` ASC)  ,
  INDEX `fk_restriction_endpoint1_idx` (`endpoint_id` ASC)  ,
  INDEX `fk_restriction_healthcare_service1_idx` (`healthcare_service_id` ASC)  ,
  INDEX `fk_restriction_location1_idx` (`location_id` ASC)  ,
  INDEX `fk_restriction_network1_idx` (`network_id` ASC)  ,
  INDEX `fk_restriction_meta_data1_idx` (`meta_data_id` ASC)  ,
  INDEX `fk_restriction_codeable_concept1_idx` (`scope_cc_id` ASC)  ,
  INDEX `fk_restriction_insurance_plan1_idx` (`insurance_plan_id` ASC)  ,
  INDEX `fk_vhdir_restriction_provision1_idx` (`provision_id` ASC)  ,
  CONSTRAINT `fk_restriction_careteam1`
    FOREIGN KEY (`careteam_id`)
    REFERENCES `spd_medium`.`vhdir_careteam` (`careteam_id`),
  CONSTRAINT `fk_restriction_codeable_concept1`
    FOREIGN KEY (`scope_cc_id`)
    REFERENCES `spd_medium`.`fhir_codeable_concept` (`codeable_concept_id`),
  CONSTRAINT `fk_restriction_endpoint1`
    FOREIGN KEY (`endpoint_id`)
    REFERENCES `spd_medium`.`vhdir_endpoint` (`endpoint_id`),
  CONSTRAINT `fk_restriction_healthcare_service1`
    FOREIGN KEY (`healthcare_service_id`)
    REFERENCES `spd_medium`.`vhdir_healthcare_service` (`healthcare_service_id`),
  CONSTRAINT `fk_restriction_insurance_plan1`
    FOREIGN KEY (`insurance_plan_id`)
    REFERENCES `spd_medium`.`vhdir_insurance_plan` (`insurance_plan_id`),
  CONSTRAINT `fk_restriction_location1`
    FOREIGN KEY (`location_id`)
    REFERENCES `spd_medium`.`vhdir_location` (`location_id`),
  CONSTRAINT `fk_restriction_meta_data1`
    FOREIGN KEY (`meta_data_id`)
    REFERENCES `spd_medium`.`fhir_meta_data` (`meta_data_id`),
  CONSTRAINT `fk_restriction_network1`
    FOREIGN KEY (`network_id`)
    REFERENCES `spd_medium`.`vhdir_network` (`network_id`),
  CONSTRAINT `fk_restriction_organization1`
    FOREIGN KEY (`organization_id`)
    REFERENCES `spd_medium`.`vhdir_organization` (`organization_id`),
  CONSTRAINT `fk_restriction_organization_affiliation1`
    FOREIGN KEY (`organization_affiliation_id`)
    REFERENCES `spd_medium`.`vhdir_organization_affiliation` (`organization_affiliation_id`),
  CONSTRAINT `fk_restriction_practitioner1`
    FOREIGN KEY (`practitioner_id`)
    REFERENCES `spd_medium`.`vhdir_practitioner` (`practitioner_id`),
  CONSTRAINT `fk_restriction_practitioner_role1`
    FOREIGN KEY (`practitioner_role_id`)
    REFERENCES `spd_medium`.`vhdir_practitioner_role` (`practitioner_role_id`),
  CONSTRAINT `fk_vhdir_restriction_provision1`
    FOREIGN KEY (`provision_id`)
    REFERENCES `spd_medium`.`provision` (`provision_id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'This profile sets minimum expectations for searching for and fetching information associated with a restriction. It identifies which core elements, extensions, vocabularies and value sets SHALL be present in the Consent resource when using this profile.\n\nThe FHIR specification contains a security meta tag which can be used to inform systems of the sensitivity of resources. The tag can be used by access control mechanisms to ensure content isn’t exposed inappropriately. However, the security meta tag can only indicate sensitivity at the resource level, and provides relatively little context about the restriction.\n\nThis implementation guide profiles the Consent resource to provide additional details about the nature of restrictions on content passed from the validated healthcare directory to downstream workflow environments.\n\nThe restriction profile consists of the following elements:\n\nconsent.status indicates whether the restriction is active\n\nconsent.category describes the type of restriction (e.g. the data may be further disclosed by the downstream workflow environment per the terms of a Data Use Agreement)\n\nconsent.dateTime indicates when the restriction was last updated\n\nconsent.policy references a policy or policies defining the restriction\n\nconsent.provision defines access rights for restricted content\n\nExamples:\nThe following are example uses for the vhdir-restriction profile:\nRestricted address for a women’s shelter\nRestricted contact details for services provided by a women’s shelter\n\nHas mandatory status code, scope codeable concept\n\nHas at least one category codeable concept\n\nHas optional dateTime and provision\n\nHas 0 to many policies\n\nReferenced by practitioner, practitioner role, organization, ogranization affiliation, careteam, endpoint, healthcare service, location, network, insurance plan\n';


-- -----------------------------------------------------
-- Table `spd_medium`.`vhdir_validation`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `spd_medium`.`vhdir_validation` ;

CREATE TABLE IF NOT EXISTS `spd_medium`.`vhdir_validation` (
  `validation_id` INT(11) NOT NULL AUTO_INCREMENT,
  `meta_data_id` INT(11) NULL DEFAULT NULL,
  `need_cc_id` INT(11) NOT NULL COMMENT 'none | initial | periodic\nBinding: need (preferred)',
  `target_location` VARCHAR(45) NULL DEFAULT NULL COMMENT 'The fhirpath location(s) within the resource that was validated\nThis should be a list of strings',
  `status` VARCHAR(45) NOT NULL COMMENT 'attested | validated | in-process | req-revalid | val-fail | reval-fail\nBinding: status (required)',
  `status_date` DATETIME NOT NULL COMMENT 'When the validation status was updated',
  `validation_type_cc_id` INT(11) NOT NULL COMMENT 'nothing|single|multiple\nBinding: validation-type (example)',
  `frequency` VARCHAR(45) NULL DEFAULT NULL COMMENT 'Frequency of revalidation',
  `last_performed` DATETIME NULL DEFAULT NULL COMMENT 'The date/time validation was last completed (including failed validations)',
  `next_scheduled` DATE NULL DEFAULT NULL COMMENT 'The date when target is next validated, if appropriate',
  `failure_action_cc_id` INT(11) NOT NULL COMMENT 'fatal | warn | rec-only | none\nBinding: failure-action (preferred)',
  `attestation_id` INT(11) NOT NULL COMMENT 'Information about the entity attesting to information',
  `validator_organization_id` INT(11) NULL DEFAULT NULL COMMENT 'Reference to the organization validating information',
  PRIMARY KEY (`validation_id`),
  INDEX `fk_vhdir_validation_attestation1_idx` (`attestation_id` ASC)  ,
  CONSTRAINT `fk_vhdir_validation_attestation1`
    FOREIGN KEY (`attestation_id`)
    REFERENCES `spd_medium`.`attestation` (`attestation_id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'This profile sets minimum expectations for searching for and fetching information associated with validation. It identifies which core elements, extensions, vocabularies and value sets SHALL be present in the VerificationResult resource when using this profile.\n\nThe vhdir  implementation guide was developed to support the need for validated provider data in many different healthcare workflows. It profiles the verificationResult resource to convey information about the validation status of any data in a validated healthcare directory, including how it was validated, who validated it, and where the data came from.\n\nThis profile modifies the base VerificationResult resource in the following manner:\n Constrains the cardinality of VerificationResult.target (1..), verificationResult.need (1..1), verificationResult.statusDate (1..1), verificationResult.validationType (1..1), verificationResult.validationProcess (1..), verificationResult.failureAction (1..1), verificationResult.primarySource.type (1..*), verificationResult.attestation.communicatonMethod (1..1), verificationResult.attestation.date (1..1)\n\nAll references SHALL conform to the appropriate Validated Healthcare Directory Implementation Guide profile\n\nExamples:\nThe following are example uses for the vhdir-validation profile:\\\\\\\\nValidation of a practitioner’s medical license\n\nHas mandatory need codeable concept, status code, status dateTime, validationType codeable concept, failure action codeable concept, attestation\n\nHas at least one validationProcess codeable concept, target resource reference, \n\nHas optional frequency, lastPerformed dateTime, next scheduled date, \n\nHas 0 to many target location strings, primary sources, validators\n\n';


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
